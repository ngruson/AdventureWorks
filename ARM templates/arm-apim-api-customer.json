{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "apim-name": {
            "type": "string"
        }
    },
    "functions": [],
    "variables": {},
    "resources": [
        {
            "type": "Microsoft.ApiManagement/service/apiVersionSets",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api-version-set')]",
            "properties": {
                "displayName": "Customer API",
                "versioningScheme": "Segment"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apiVersionSets', parameters('apim-name'), 'customer-api-version-set')]"
            ],
            "properties": {
                "displayName": "Customer API",
                "apiRevision": "1",
                "subscriptionRequired": true,
                "serviceUrl": "https://app-adventureworks-wcf-customerservice.azurewebsites.net/",
                "path": "customer",
                "protocols": [
                    "https"
                ],
                "isCurrent": true,
                "apiVersion": "1.0",
                "apiVersionSetId": "[resourceId('Microsoft.ApiManagement/service/apiVersionSets', parameters('apim-name'), 'customer-api-version-set')]"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/AddCustomerAddress')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "displayName": "AddCustomerAddress",
                "method": "POST",
                "urlTemplate": "/{accountNumber}/addresses",
                "templateParameters": [
                    {
                        "name": "accountNumber",
                        "type": "string",
                        "required": true,
                        "values": []
                    }
                ],
                "description": "AddCustomerAddress",
                "request": {
                    "description": "ICustomerService_AddCustomerAddress_InputMessage",
                    "queryParameters": [],
                    "headers": [],
                    "representations": [
                        {
                            "contentType": "application/json",
                            "sample": "{\r\n  \"customerAddress\": {\r\n    \"addressType\": \"sample\",\r\n    \"address\": {\r\n      \"addressLine1\": \"sample\",\r\n      \"addressLine2\": \"sample\",\r\n      \"postalCode\": \"sample\",\r\n      \"city\": \"sample\",\r\n      \"stateProvinceCode\": \"sample\"\r\n    }\r\n  }\r\n}",
                            "typeName": "AddCustomerAddress"
                        }
                    ]
                },
                "responses": [
                    {
                        "statusCode": 200,
                        "description": "ICustomerService_AddCustomerAddress_OutputMessage",
                        "representations": [
                            {
                                "contentType": "application/json",
                                "sample": "{\r\n  \"addCustomerAddressResponse\": {\r\n    \"addCustomerAddressResult\": {}\r\n  }\r\n}",
                                "typeName": "AddCustomerAddressResponse"
                            }
                        ],
                        "headers": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations/policies",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/AddCustomerAddress/policy')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('apim-name'), 'customer-api', 'AddCustomerAddress')]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "value": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <rewrite-uri template=\"/CustomerService.svc\" copy-unmatched-params=\"false\" />\r\n    <set-header name=\"SOAPAction\" exists-action=\"override\">\r\n      <value>\"AddCustomerAddress\"</value>\r\n    </set-header>\r\n    <set-body template=\"liquid\">\r\n      <soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"http://services.aw.com/CustomerService/1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n        <soap:Body>\r\n          <AddCustomerAddress>\r\n            <request>\r\n                            {% if context.Request.MatchedParameters[\"accountNumber\"] != null %}\r\n                            <AccountNumber>{{context.Request.MatchedParameters[\"accountNumber\"]}}</AccountNumber>                \r\n                            {% else %}\r\n                            <AccountNumber xsi:nil=\"true\" />\r\n                            {% endif %}\r\n                            <CustomerAddress>\r\n                                {% if body.customerAddress.addressType %}\r\n                                <AddressType xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerAddress\">{{body.customerAddress.addressType}}</AddressType>\r\n                                {% else %}\r\n                                <AddressType xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerAddress\" xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                                <Address>\r\n                                    {% if body.customerAddress.address.addressLine1 %}\r\n                                    <AddressLine1 xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerAddress\">{{body.customerAddress.address.addressLine1}}</AddressLine1>\r\n                                    {% else %}\r\n                                    <AddressLine1 xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerAddress\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customerAddress.address.addressLine2 %}\r\n                                    <AddressLine2 xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerAddress\">{{body.customerAddress.address.addressLine2}}</AddressLine2>\r\n                                    {% else %}\r\n                                    <AddressLine2 xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerAddress\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customerAddress.address.postalCode %}\r\n                                    <PostalCode xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerAddress\">{{body.customerAddress.address.postalCode}}</PostalCode>\r\n                                    {% else %}\r\n                                    <PostalCode xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerAddress\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customerAddress.address.city %}\r\n                                    <City xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerAddress\">{{body.customerAddress.address.city}}</City>\r\n                                    {% else %}\r\n                                    <City xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerAddress\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customerAddress.address.stateProvinceCode %}\r\n                                    <StateProvinceCode xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerAddress\">{{body.customerAddress.address.stateProvinceCode}}</StateProvinceCode>\r\n                                    {% else %}\r\n                                    <StateProvinceCode xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerAddress\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                </Address></CustomerAddress></request>\r\n          </AddCustomerAddress>\r\n        </soap:Body>\r\n      </soap:Envelope>\r\n    </set-body>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>text/xml</value>\r\n    </set-header>\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <choose>\r\n      <when condition=\"@(context.Response.StatusCode &lt; 400)\">\r\n        <set-body template=\"liquid\">\r\n        {\r\n            \"addCustomerAddressResponse\": \r\n            {\r\n                \"addCustomerAddressResult\": \r\n                {\r\n                }\r\n            }\r\n        }</set-body>\r\n      </when>\r\n      <otherwise>\r\n        <set-variable name=\"old-body\" value=\"@(context.Response.Body.As&lt;string&gt;(preserveContent: true))\" />\r\n        <!-- Error response as per https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#7102-error-condition-responses -->\r\n        <set-body template=\"liquid\">{\r\n            \"error\": {\r\n                \"code\": \"{{body.envelope.body.fault.faultcode}}\",\r\n                \"message\": \"{{body.envelope.body.fault.faultstring}}\"\r\n            }\r\n        }</set-body>\r\n        <choose>\r\n          <when condition=\"@(string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;code&quot;].ToString()) &amp;&amp; string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;message&quot;].ToString()))\">\r\n            <set-body>@{\r\n                    var newResponseBody = new JObject();\r\n                    newResponseBody[\"error\"] = new JObject();\r\n                    newResponseBody[\"error\"][\"code\"] = \"InvalidErrorResponseBody\";\r\n                    if (string.IsNullOrEmpty((string)context.Variables[\"old-body\"]))\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was empty.\";\r\n                    }\r\n                    else\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was: '\" + context.Variables[\"old-body\"] + \"'.\";\r\n                    }\r\n                    return newResponseBody.ToString();\r\n                }</set-body>\r\n          </when>\r\n        </choose>\r\n      </otherwise>\r\n    </choose>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>application/json</value>\r\n    </set-header>\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>",
                "format": "xml"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/AddCustomerContact')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "displayName": "AddCustomerContact",
                "method": "POST",
                "urlTemplate": "/{accountNumber}/contacts",
                "templateParameters": [
                    {
                        "name": "accountNumber",
                        "type": "string",
                        "required": true,
                        "values": []
                    }
                ],
                "description": "AddCustomerContact",
                "request": {
                    "description": "ICustomerService_AddCustomerContact_InputMessage",
                    "queryParameters": [],
                    "headers": [],
                    "representations": [
                        {
                            "contentType": "application/json",
                            "sample": "{\r\n  \"customerContact\": {\r\n    \"contactType\": \"sample\",\r\n    \"contact\": {\r\n      \"title\": \"sample\",\r\n      \"firstName\": \"sample\",\r\n      \"middleName\": \"sample\",\r\n      \"lastName\": \"sample\",\r\n      \"suffix\": \"sample\",\r\n      \"emailAddresses\": [\r\n        {\r\n          \"emailAddress\": \"sample\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}",
                            "typeName": "AddCustomerContact"
                        }
                    ]
                },
                "responses": [
                    {
                        "statusCode": 200,
                        "description": "ICustomerService_AddCustomerContact_OutputMessage",
                        "representations": [
                            {
                                "contentType": "application/json",
                                "sample": "{\r\n  \"addCustomerContactResponse\": {\r\n    \"addCustomerContactResult\": {}\r\n  }\r\n}",
                                "typeName": "AddCustomerContactResponse"
                            }
                        ],
                        "headers": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations/policies",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/AddCustomerContact/policy')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('apim-name'), 'customer-api', 'AddCustomerContact')]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "value": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <rewrite-uri template=\"/CustomerService.svc\" copy-unmatched-params=\"false\" />\r\n    <set-header name=\"SOAPAction\" exists-action=\"override\">\r\n      <value>\"AddCustomerContact\"</value>\r\n    </set-header>\r\n    <set-body template=\"liquid\">\r\n      <soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"http://services.aw.com/CustomerService/1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n        <soap:Body>\r\n          <AddCustomerContact>\r\n            <request>\r\n                            {% if context.Request.MatchedParameters[\"accountNumber\"] != null %}\r\n                            <AccountNumber>{{context.Request.MatchedParameters[\"accountNumber\"]}}</AccountNumber>                \r\n                            {% else %}\r\n                            <AccountNumber xsi:nil=\"true\" />\r\n                            {% endif %}\r\n                            <CustomerContact>\r\n                                {% if body.customerContact.contactType %}\r\n                                <ContactType xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\">{{body.customerContact.contactType}}</ContactType>\r\n                                {% else %}\r\n                                <ContactType xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\" xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                                <Contact>\r\n                                    {% if body.customerContact.contact.title %}\r\n                                    <Title xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\">{{body.customerContact.contact.title}}</Title>\r\n                                    {% else %}\r\n                                    <Title xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customerContact.contact.firstName %}\r\n                                    <FirstName xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\">{{body.customerContact.contact.firstName}}</FirstName>\r\n                                    {% else %}\r\n                                    <FirstName xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customerContact.contact.middleName %}\r\n                                    <MiddleName xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\">{{body.customerContact.contact.middleName}}</MiddleName>\r\n                                    {% else %}\r\n                                    <MiddleName xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customerContact.contact.lastName %}\r\n                                    <LastName xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\">{{body.customerContact.contact.lastName}}</LastName>\r\n                                    {% else %}\r\n                                    <LastName xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customerContact.contact.suffix %}\r\n                                    <Suffix xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\">{{body.customerContact.contact.suffix}}</Suffix>\r\n                                    {% else %}\r\n                                    <Suffix xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    <EmailAddresses>\r\n                                        {% for item in body.customerContact.contact.emailAddresses -%}\r\n                                        <EmailAddress>\r\n                                            {% if item.emailAddress %}\r\n                                            <EmailAddress xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\">{{item.emailAddress}}</EmailAddress>\r\n                                            {% else %}\r\n                                            <EmailAddress xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContact\" xsi:nil=\"true\" />\r\n                                            {% endif %}\r\n                                        </EmailAddress>\r\n                                        {% endfor -%}\r\n                                    </EmailAddresses></Contact></CustomerContact></request>\r\n          </AddCustomerContact>\r\n        </soap:Body>\r\n      </soap:Envelope>\r\n    </set-body>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>text/xml</value>\r\n    </set-header>\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <choose>\r\n      <when condition=\"@(context.Response.StatusCode &lt; 400)\">\r\n        <set-body template=\"liquid\">\r\n        {\r\n            \"addCustomerContactResponse\": \r\n            {\r\n                \"addCustomerContactResult\": \r\n                {\r\n                }\r\n            }\r\n        }</set-body>\r\n      </when>\r\n      <otherwise>\r\n        <set-variable name=\"old-body\" value=\"@(context.Response.Body.As&lt;string&gt;(preserveContent: true))\" />\r\n        <!-- Error response as per https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#7102-error-condition-responses -->\r\n        <set-body template=\"liquid\">{\r\n            \"error\": {\r\n                \"code\": \"{{body.envelope.body.fault.faultcode}}\",\r\n                \"message\": \"{{body.envelope.body.fault.faultstring}}\"\r\n            }\r\n        }</set-body>\r\n        <choose>\r\n          <when condition=\"@(string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;code&quot;].ToString()) &amp;&amp; string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;message&quot;].ToString()))\">\r\n            <set-body>@{\r\n                    var newResponseBody = new JObject();\r\n                    newResponseBody[\"error\"] = new JObject();\r\n                    newResponseBody[\"error\"][\"code\"] = \"InvalidErrorResponseBody\";\r\n                    if (string.IsNullOrEmpty((string)context.Variables[\"old-body\"]))\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was empty.\";\r\n                    }\r\n                    else\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was: '\" + context.Variables[\"old-body\"] + \"'.\";\r\n                    }\r\n                    return newResponseBody.ToString();\r\n                }</set-body>\r\n          </when>\r\n        </choose>\r\n      </otherwise>\r\n    </choose>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>application/json</value>\r\n    </set-header>\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>",
                "format": "xml"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/AddCustomerContactInfo')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "displayName": "AddCustomerContactInfo",
                "method": "POST",
                "urlTemplate": "/{accountNumber}/contactInfo",
                "templateParameters": [
                    {
                        "name": "accountNumber",
                        "type": "string",
                        "required": true,
                        "values": []
                    }
                ],
                "description": "AddCustomerContactInfo",
                "request": {
                    "description": "ICustomerService_AddCustomerContactInfo_InputMessage",
                    "queryParameters": [],
                    "headers": [],
                    "representations": [
                        {
                            "contentType": "application/json",
                            "sample": "{\r\n  \"customerContactInfo\": {\r\n    \"channel\": \"sample\",\r\n    \"contactInfoType\": \"sample\",\r\n    \"value\": \"sample\"\r\n  }\r\n}",
                            "typeName": "AddCustomerContactInfo"
                        }
                    ]
                },
                "responses": [
                    {
                        "statusCode": 200,
                        "description": "ICustomerService_AddCustomerContactInfo_OutputMessage",
                        "representations": [
                            {
                                "contentType": "application/json",
                                "sample": "{\r\n  \"addCustomerContactInfoResponse\": {\r\n    \"addCustomerContactInfoResult\": {}\r\n  }\r\n}",
                                "typeName": "AddCustomerContactInfoResponse"
                            }
                        ],
                        "headers": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations/policies",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/AddCustomerContactInfo/policy')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('apim-name'), 'customer-api', 'AddCustomerContactInfo')]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "value": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <rewrite-uri template=\"/CustomerService.svc\" copy-unmatched-params=\"false\" />\r\n    <set-header name=\"SOAPAction\" exists-action=\"override\">\r\n      <value>\"AddCustomerContactInfo\"</value>\r\n    </set-header>\r\n    <set-body template=\"liquid\">\r\n      <soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"http://services.aw.com/CustomerService/1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n        <soap:Body>\r\n          <AddCustomerContactInfo>\r\n            <request>\r\n                            {% if context.Request.MatchedParameters[\"accountNumber\"] != null %}\r\n                            <AccountNumber>{{context.Request.MatchedParameters[\"accountNumber\"]}}</AccountNumber>                \r\n                            {% else %}\r\n                            <AccountNumber xsi:nil=\"true\" />\r\n                            {% endif %}\r\n                            <CustomerContactInfo>\r\n                                {% if body.customerContactInfo.channel %}\r\n                                <Channel xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContactInfo\">{{body.customerContactInfo.channel}}</Channel>\r\n                                {% else %}\r\n                                <Channel xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContactInfo\" xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                                {% if body.customerContactInfo.contactInfoType %}\r\n                                <ContactInfoType xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContactInfo\">{{body.customerContactInfo.contactInfoType}}</ContactInfoType>\r\n                                {% else %}\r\n                                <ContactInfoType xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContactInfo\" xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                                {% if body.customerContactInfo.value %}\r\n                                <Value xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContactInfo\">{{body.customerContactInfo.value}}</Value>\r\n                                {% else %}\r\n                                <Value xmlns=\"http://services.aw.com/CustomerService/1.0/AddCustomerContactInfo\" xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                            </CustomerContactInfo></request>\r\n          </AddCustomerContactInfo>\r\n        </soap:Body>\r\n      </soap:Envelope>\r\n    </set-body>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>text/xml</value>\r\n    </set-header>\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <choose>\r\n      <when condition=\"@(context.Response.StatusCode &lt; 400)\">\r\n        <set-body template=\"liquid\">\r\n        {\r\n            \"addCustomerContactInfoResponse\": \r\n            {\r\n                \"addCustomerContactInfoResult\": \r\n                {\r\n                }\r\n            }\r\n        }</set-body>\r\n      </when>\r\n      <otherwise>\r\n        <set-variable name=\"old-body\" value=\"@(context.Response.Body.As&lt;string&gt;(preserveContent: true))\" />\r\n        <!-- Error response as per https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#7102-error-condition-responses -->\r\n        <set-body template=\"liquid\">{\r\n            \"error\": {\r\n                \"code\": \"{{body.envelope.body.fault.faultcode}}\",\r\n                \"message\": \"{{body.envelope.body.fault.faultstring}}\"\r\n            }\r\n        }</set-body>\r\n        <choose>\r\n          <when condition=\"@(string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;code&quot;].ToString()) &amp;&amp; string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;message&quot;].ToString()))\">\r\n            <set-body>@{\r\n                    var newResponseBody = new JObject();\r\n                    newResponseBody[\"error\"] = new JObject();\r\n                    newResponseBody[\"error\"][\"code\"] = \"InvalidErrorResponseBody\";\r\n                    if (string.IsNullOrEmpty((string)context.Variables[\"old-body\"]))\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was empty.\";\r\n                    }\r\n                    else\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was: '\" + context.Variables[\"old-body\"] + \"'.\";\r\n                    }\r\n                    return newResponseBody.ToString();\r\n                }</set-body>\r\n          </when>\r\n        </choose>\r\n      </otherwise>\r\n    </choose>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>application/json</value>\r\n    </set-header>\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>",
                "format": "xml"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/DeleteCustomerAddress')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "displayName": "DeleteCustomerAddress",
                "method": "DELETE",
                "urlTemplate": "/{accountNumber}/addresses/{addressType}",
                "templateParameters": [
                    {
                        "name": "accountNumber",
                        "type": "string",
                        "required": true,
                        "values": []
                    },
                    {
                        "name": "addressType",
                        "type": "string",
                        "required": true,
                        "values": []
                    }
                ],
                "description": "DeleteCustomerAddress",
                "responses": [
                    {
                        "statusCode": 200,
                        "description": "ICustomerService_DeleteCustomerAddress_OutputMessage",
                        "representations": [
                            {
                                "contentType": "application/json",
                                "sample": "{\r\n  \"deleteCustomerAddressResponse\": {\r\n    \"deleteCustomerAddressResult\": {}\r\n  }\r\n}",
                                "typeName": "DeleteCustomerAddressResponse"
                            }
                        ],
                        "headers": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations/policies",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/DeleteCustomerAddress/policy')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('apim-name'), 'customer-api', 'DeleteCustomerAddress')]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "value": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <rewrite-uri template=\"/CustomerService.svc\" copy-unmatched-params=\"false\" />\r\n    <set-method>POST</set-method>\r\n    <set-header name=\"SOAPAction\" exists-action=\"override\">\r\n      <value>\"DeleteCustomerAddress\"</value>\r\n    </set-header>\r\n    <set-body template=\"liquid\">\r\n      <soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"http://services.aw.com/CustomerService/1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n        <soap:Body>\r\n          <DeleteCustomerAddress>\r\n            <request>\r\n                            {% if context.Request.MatchedParameters[\"accountNumber\"] != null %}\r\n                            <AccountNumber>{{context.Request.MatchedParameters[\"accountNumber\"]}}</AccountNumber>                \r\n                            {% else %}\r\n                            <AccountNumber xsi:nil=\"true\" />\r\n                            {% endif %}\r\n                            {% if context.Request.MatchedParameters[\"addressType\"] != null %}\r\n                            <AddressType>{{context.Request.MatchedParameters[\"addressType\"]}}</AddressType>\r\n                            {% else %}\r\n                            <AddressType xsi:nil=\"true\" />\r\n                            {% endif %}\r\n                        </request>\r\n          </DeleteCustomerAddress>\r\n        </soap:Body>\r\n      </soap:Envelope>\r\n    </set-body>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>text/xml</value>\r\n    </set-header>\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <choose>\r\n      <when condition=\"@(context.Response.StatusCode &lt; 400)\">\r\n        <set-body template=\"liquid\">\r\n        {\r\n            \"deleteCustomerAddressResponse\": \r\n            {\r\n                \"deleteCustomerAddressResult\": \r\n                {\r\n                }\r\n            }\r\n        }</set-body>\r\n      </when>\r\n      <otherwise>\r\n        <set-variable name=\"old-body\" value=\"@(context.Response.Body.As&lt;string&gt;(preserveContent: true))\" />\r\n        <!-- Error response as per https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#7102-error-condition-responses -->\r\n        <set-body template=\"liquid\">{\r\n            \"error\": {\r\n                \"code\": \"{{body.envelope.body.fault.faultcode}}\",\r\n                \"message\": \"{{body.envelope.body.fault.faultstring}}\"\r\n            }\r\n        }</set-body>\r\n        <choose>\r\n          <when condition=\"@(string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;code&quot;].ToString()) &amp;&amp; string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;message&quot;].ToString()))\">\r\n            <set-body>@{\r\n                    var newResponseBody = new JObject();\r\n                    newResponseBody[\"error\"] = new JObject();\r\n                    newResponseBody[\"error\"][\"code\"] = \"InvalidErrorResponseBody\";\r\n                    if (string.IsNullOrEmpty((string)context.Variables[\"old-body\"]))\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was empty.\";\r\n                    }\r\n                    else\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was: '\" + context.Variables[\"old-body\"] + \"'.\";\r\n                    }\r\n                    return newResponseBody.ToString();\r\n                }</set-body>\r\n          </when>\r\n        </choose>\r\n      </otherwise>\r\n    </choose>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>application/json</value>\r\n    </set-header>\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>",
                "format": "xml"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/DeleteCustomerContact')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "displayName": "DeleteCustomerContact",
                "method": "DELETE",
                "urlTemplate": "/{accountNumber}/contacts",
                "templateParameters": [
                    {
                        "name": "accountNumber",
                        "type": "string",
                        "required": true,
                        "values": []
                    }
                ],
                "description": "DeleteCustomerContact",
                "request": {
                    "description": "ICustomerService_DeleteCustomerContact_InputMessage",
                    "queryParameters": [],
                    "headers": [],
                    "representations": [
                        {
                            "contentType": "application/json",
                            "sample": "{\r\n  \"contactType\": \"sample\",\r\n  \"contact\": {\r\n    \"firstName\": \"sample\",\r\n    \"middleName\": \"sample\",\r\n    \"lastName\": \"sample\"\r\n  }\r\n}",
                            "typeName": "DeleteCustomerContact"
                        }
                    ]
                },
                "responses": [
                    {
                        "statusCode": 200,
                        "description": "ICustomerService_DeleteCustomerContact_OutputMessage",
                        "representations": [
                            {
                                "contentType": "application/json",
                                "sample": "{\r\n  \"deleteCustomerContactResponse\": {\r\n    \"deleteCustomerContactResult\": {}\r\n  }\r\n}",
                                "typeName": "DeleteCustomerContactResponse"
                            }
                        ],
                        "headers": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations/policies",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/DeleteCustomerContact/policy')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('apim-name'), 'customer-api', 'DeleteCustomerContact')]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "value": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <rewrite-uri template=\"/CustomerService.svc\" copy-unmatched-params=\"false\" />\r\n    <set-header name=\"SOAPAction\" exists-action=\"override\">\r\n      <value>\"DeleteCustomerContact\"</value>\r\n    </set-header>\r\n    <set-body template=\"liquid\">\r\n      <soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"http://services.aw.com/CustomerService/1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n        <soap:Body>\r\n          <DeleteCustomerContact>\r\n            <request>\r\n                            {% if context.Request.MatchedParameters[\"accountNumber\"] != null %}\r\n                            <AccountNumber>{{context.Request.MatchedParameters[\"accountNumber\"]}}</AccountNumber>                \r\n                            {% else %}\r\n                            <AccountNumber xsi:nil=\"true\" />\r\n                            {% endif %}\r\n                            {% if body.contactType %}\r\n                            <ContactType>{{body.contactType}}</ContactType>\r\n                            {% else %}\r\n                            <ContactType xsi:nil=\"true\" />\r\n                            {% endif %}\r\n                            <Contact>\r\n                                {% if body.contact.firstName %}\r\n                                <FirstName>{{body.contact.firstName}}</FirstName>\r\n                                {% else %}\r\n                                <FirstName xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                                {% if body.contact.middleName %}\r\n                                <MiddleName>{{body.contact.middleName}}</MiddleName>\r\n                                {% else %}\r\n                                <MiddleName xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                                {% if body.contact.lastName %}\r\n                                <LastName>{{body.contact.lastName}}</LastName>\r\n                                {% else %}\r\n                                <LastName xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                            </Contact></request>\r\n          </DeleteCustomerContact>\r\n        </soap:Body>\r\n      </soap:Envelope>\r\n    </set-body>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>text/xml</value>\r\n    </set-header>\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <choose>\r\n      <when condition=\"@(context.Response.StatusCode &lt; 400)\">\r\n        <set-body template=\"liquid\">\r\n        {\r\n            \"deleteCustomerContactResponse\": \r\n            {\r\n                \"deleteCustomerContactResult\": \r\n                {\r\n                }\r\n            }\r\n        }</set-body>\r\n      </when>\r\n      <otherwise>\r\n        <set-variable name=\"old-body\" value=\"@(context.Response.Body.As&lt;string&gt;(preserveContent: true))\" />\r\n        <!-- Error response as per https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#7102-error-condition-responses -->\r\n        <set-body template=\"liquid\">{\r\n            \"error\": {\r\n                \"code\": \"{{body.envelope.body.fault.faultcode}}\",\r\n                \"message\": \"{{body.envelope.body.fault.faultstring}}\"\r\n            }\r\n        }</set-body>\r\n        <choose>\r\n          <when condition=\"@(string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;code&quot;].ToString()) &amp;&amp; string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;message&quot;].ToString()))\">\r\n            <set-body>@{\r\n                    var newResponseBody = new JObject();\r\n                    newResponseBody[\"error\"] = new JObject();\r\n                    newResponseBody[\"error\"][\"code\"] = \"InvalidErrorResponseBody\";\r\n                    if (string.IsNullOrEmpty((string)context.Variables[\"old-body\"]))\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was empty.\";\r\n                    }\r\n                    else\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was: '\" + context.Variables[\"old-body\"] + \"'.\";\r\n                    }\r\n                    return newResponseBody.ToString();\r\n                }</set-body>\r\n          </when>\r\n        </choose>\r\n      </otherwise>\r\n    </choose>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>application/json</value>\r\n    </set-header>\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>",
                "format": "xml"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/DeleteCustomerContactInfo')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "displayName": "DeleteCustomerContactInfo",
                "method": "DELETE",
                "urlTemplate": "/{accountNumber}/contactInfo",
                "templateParameters": [
                    {
                        "name": "accountNumber",
                        "type": "string",
                        "required": true,
                        "values": []
                    }
                ],
                "description": "DeleteCustomerContactInfo",
                "request": {
                    "description": "ICustomerService_DeleteCustomerContactInfo_InputMessage",
                    "queryParameters": [],
                    "headers": [],
                    "representations": [
                        {
                            "contentType": "application/json",
                            "sample": "{\r\n  \"customerContactInfo\": {\r\n    \"channel\": \"sample\",\r\n    \"contactInfoType\": \"sample\",\r\n    \"value\": \"sample\"\r\n  }\r\n}",
                            "typeName": "DeleteCustomerContactInfo"
                        }
                    ]
                },
                "responses": [
                    {
                        "statusCode": 200,
                        "description": "ICustomerService_DeleteCustomerContactInfo_OutputMessage",
                        "representations": [
                            {
                                "contentType": "application/json",
                                "sample": "{\r\n  \"deleteCustomerContactInfoResponse\": {\r\n    \"deleteCustomerContactInfoResult\": {}\r\n  }\r\n}",
                                "typeName": "DeleteCustomerContactInfoResponse"
                            }
                        ],
                        "headers": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations/policies",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/DeleteCustomerContactInfo/policy')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('apim-name'), 'customer-api', 'DeleteCustomerContactInfo')]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "value": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <rewrite-uri template=\"/CustomerService.svc\" copy-unmatched-params=\"false\" />\r\n    <set-method>POST</set-method>\r\n    <set-header name=\"SOAPAction\" exists-action=\"override\">\r\n      <value>\"DeleteCustomerContactInfo\"</value>\r\n    </set-header>\r\n    <set-body template=\"liquid\">\r\n      <soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"http://services.aw.com/CustomerService/1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n        <soap:Body>\r\n          <DeleteCustomerContactInfo>\r\n            <request>\r\n                            {% if context.Request.MatchedParameters[\"accountNumber\"] != null %}\r\n                            <AccountNumber>{{context.Request.MatchedParameters[\"accountNumber\"]}}</AccountNumber>                \r\n                            {% else %}\r\n                            <AccountNumber xsi:nil=\"true\" />\r\n                            {% endif %}\r\n                            <CustomerContactInfo>\r\n                                {% if body.customerContactInfo.channel %}\r\n                                <Channel xmlns=\"http://services.aw.com/CustomerService/1.0/DeleteCustomerContactInfo\">{{body.customerContactInfo.channel}}</Channel>\r\n                                {% else %}\r\n                                <Channel xmlns=\"http://services.aw.com/CustomerService/1.0/DeleteCustomerContactInfo\" xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                                {% if body.customerContactInfo.contactInfoType %}\r\n                                <ContactInfoType xmlns=\"http://services.aw.com/CustomerService/1.0/DeleteCustomerContactInfo\">{{body.customerContactInfo.contactInfoType}}</ContactInfoType>\r\n                                {% else %}\r\n                                <ContactInfoType xmlns=\"http://services.aw.com/CustomerService/1.0/DeleteCustomerContactInfo\" xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                                {% if body.customerContactInfo.value %}\r\n                                <Value xmlns=\"http://services.aw.com/CustomerService/1.0/DeleteCustomerContactInfo\">{{body.customerContactInfo.value}}</Value>\r\n                                {% else %}\r\n                                <Value xmlns=\"http://services.aw.com/CustomerService/1.0/DeleteCustomerContactInfo\" xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                            </CustomerContactInfo></request>\r\n          </DeleteCustomerContactInfo>\r\n        </soap:Body>\r\n      </soap:Envelope>\r\n    </set-body>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>text/xml</value>\r\n    </set-header>\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <choose>\r\n      <when condition=\"@(context.Response.StatusCode &lt; 400)\">\r\n        <set-body template=\"liquid\">\r\n        {\r\n            \"deleteCustomerContactInfoResponse\": \r\n            {\r\n                \"deleteCustomerContactInfoResult\": \r\n                {\r\n                }\r\n            }\r\n        }</set-body>\r\n      </when>\r\n      <otherwise>\r\n        <set-variable name=\"old-body\" value=\"@(context.Response.Body.As&lt;string&gt;(preserveContent: true))\" />\r\n        <!-- Error response as per https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#7102-error-condition-responses -->\r\n        <set-body template=\"liquid\">{\r\n            \"error\": {\r\n                \"code\": \"{{body.envelope.body.fault.faultcode}}\",\r\n                \"message\": \"{{body.envelope.body.fault.faultstring}}\"\r\n            }\r\n        }</set-body>\r\n        <choose>\r\n          <when condition=\"@(string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;code&quot;].ToString()) &amp;&amp; string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;message&quot;].ToString()))\">\r\n            <set-body>@{\r\n                    var newResponseBody = new JObject();\r\n                    newResponseBody[\"error\"] = new JObject();\r\n                    newResponseBody[\"error\"][\"code\"] = \"InvalidErrorResponseBody\";\r\n                    if (string.IsNullOrEmpty((string)context.Variables[\"old-body\"]))\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was empty.\";\r\n                    }\r\n                    else\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was: '\" + context.Variables[\"old-body\"] + \"'.\";\r\n                    }\r\n                    return newResponseBody.ToString();\r\n                }</set-body>\r\n          </when>\r\n        </choose>\r\n      </otherwise>\r\n    </choose>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>application/json</value>\r\n    </set-header>\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>",
                "format": "xml"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/GetCustomer')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "displayName": "GetCustomer",
                "method": "GET",
                "urlTemplate": "/{accountNumber}",
                "templateParameters": [
                    {
                        "name": "accountNumber",
                        "type": "string",
                        "required": true,
                        "values": []
                    }
                ],
                "description": "GetCustomer",
                "request": {
                    "description": "ICustomerService_GetCustomer_InputMessage",
                    "queryParameters": [],
                    "headers": [],
                    "representations": [
                        {
                            "contentType": "application/json",
                            "sample": "{\r\n  \"getCustomer\": {\r\n    \"request\": {\r\n      \"accountNumber\": \"sample\"\r\n    }\r\n  }\r\n}",
                            "typeName": "GetCustomer"
                        }
                    ]
                },
                "responses": [
                    {
                        "statusCode": 200,
                        "description": "ICustomerService_GetCustomer_OutputMessage",
                        "representations": [
                            {
                                "contentType": "application/json",
                                "sample": "{\r\n  \"getCustomerResponse\": {\r\n    \"getCustomerResult\": {\r\n      \"customer\": {\r\n        \"accountNumber\": \"sample\",\r\n        \"salesTerritoryName\": \"sample\",\r\n        \"person\": {\r\n          \"title\": \"sample\",\r\n          \"firstName\": \"sample\",\r\n          \"middleName\": \"sample\",\r\n          \"lastName\": \"sample\",\r\n          \"fullName\": \"sample\",\r\n          \"suffix\": \"sample\",\r\n          \"emailPromotion\": \"sample\",\r\n          \"addresses\": [\r\n            {\r\n              \"addressType\": \"sample\",\r\n              \"address\": {\r\n                \"addressLine1\": \"sample\",\r\n                \"addressLine2\": \"sample\",\r\n                \"postalCode\": \"sample\",\r\n                \"city\": \"sample\",\r\n                \"stateProvince\": {\r\n                  \"stateProvinceCode\": \"sample\",\r\n                  \"name\": \"sample\",\r\n                  \"countryRegion\": {\r\n                    \"countryRegionCode\": \"sample\",\r\n                    \"name\": \"sample\"\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          ],\r\n          \"contactInfo\": [\r\n            {\r\n              \"contactInfoChannelType\": \"sample\",\r\n              \"contactInfoType\": \"sample\",\r\n              \"value\": \"sample\"\r\n            }\r\n          ]\r\n        },\r\n        \"store\": {\r\n          \"name\": \"sample\",\r\n          \"salesPerson\": {\r\n            \"firstName\": \"sample\",\r\n            \"middleName\": \"sample\",\r\n            \"lastName\": \"sample\",\r\n            \"fullName\": \"sample\"\r\n          },\r\n          \"addresses\": [\r\n            {\r\n              \"addressType\": \"sample\",\r\n              \"address\": {\r\n                \"addressLine1\": \"sample\",\r\n                \"addressLine2\": \"sample\",\r\n                \"postalCode\": \"sample\",\r\n                \"city\": \"sample\",\r\n                \"stateProvince\": {\r\n                  \"stateProvinceCode\": \"sample\",\r\n                  \"name\": \"sample\",\r\n                  \"countryRegion\": {\r\n                    \"countryRegionCode\": \"sample\",\r\n                    \"name\": \"sample\"\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          ],\r\n          \"contacts\": [\r\n            {\r\n              \"contactType\": \"sample\",\r\n              \"contact\": {\r\n                \"title\": \"sample\",\r\n                \"firstName\": \"sample\",\r\n                \"middleName\": \"sample\",\r\n                \"lastName\": \"sample\",\r\n                \"fullName\": \"sample\",\r\n                \"suffix\": \"sample\"\r\n              },\r\n              \"emailAddress\": \"sample\"\r\n            }\r\n          ]\r\n        },\r\n        \"salesOrders\": [\r\n          {\r\n            \"revisionNumber\": 1,\r\n            \"orderDate\": {},\r\n            \"dueDate\": {},\r\n            \"shipDate\": {},\r\n            \"status\": \"sample\",\r\n            \"onlineOrderFlag\": false,\r\n            \"salesOrderNumber\": \"sample\",\r\n            \"purchaseOrderNumber\": \"sample\",\r\n            \"accountNumber\": \"sample\",\r\n            \"salesPerson\": \"sample\",\r\n            \"territory\": \"sample\",\r\n            \"subTotal\": 1,\r\n            \"taxAmt\": 1,\r\n            \"freight\": 1,\r\n            \"totalDue\": 1\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}",
                                "typeName": "GetCustomerResponse"
                            }
                        ],
                        "headers": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations/policies",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/GetCustomer/policy')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('apim-name'), 'customer-api', 'GetCustomer')]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "value": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <rewrite-uri template=\"/CustomerService.svc\" copy-unmatched-params=\"false\" />\r\n    <set-method>POST</set-method>\r\n    <set-header name=\"SOAPAction\" exists-action=\"override\">\r\n      <value>\"GetCustomer\"</value>\r\n    </set-header>\r\n    <set-body template=\"liquid\">\r\n      <soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"http://services.aw.com/CustomerService/1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n        <soap:Body>\r\n          <GetCustomer>\r\n            <request>\r\n\t\t\t\t\t\t    {% if context.Request.MatchedParameters[\"accountNumber\"] != null %}\r\n                            <AccountNumber>{{context.Request.MatchedParameters[\"accountNumber\"]}}</AccountNumber>\r\n                            {% else %}\r\n                            <AccountNumber xsi:nil=\"true\" />\r\n                            {% endif %}\r\n\t\t\t\t\t\t</request>\r\n          </GetCustomer>\r\n        </soap:Body>\r\n      </soap:Envelope>\r\n    </set-body>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>text/xml</value>\r\n    </set-header>\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <choose>\r\n      <when condition=\"@(context.Response.StatusCode &lt; 400)\">\r\n        <set-body template=\"liquid\">\r\n        {\r\n            \r\n            \"customer\": \r\n            {\r\n                \"accountNumber\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.AccountNumber %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.AccountNumber | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                \"salesTerritoryName\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.SalesTerritoryName %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.SalesTerritoryName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person %}\"person\":\r\n                {\r\n                    \"title\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.Title %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.Title | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"firstName\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.FirstName %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.FirstName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"middleName\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.MiddleName %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.MiddleName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"lastName\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.LastName %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.LastName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"fullName\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.FullName %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.FullName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"suffix\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.Suffix %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.Suffix | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"emailPromotion\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.EmailPromotion %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.EmailPromotion | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"Addresses\": \r\n                    [\r\n                        {% JSONArrayFor item in body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.Addresses -%}\r\n                        {\r\n                            \"addressType\": {% if item.AddressType %}\"{{item.AddressType | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"address\": \r\n                            {\r\n                                \"addressLine1\": {% if item.Address.AddressLine1 %}\"{{item.Address.AddressLine1 | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"addressLine2\": {% if item.Address.AddressLine2 %}\"{{item.Address.AddressLine2 | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"postalCode\": {% if item.Address.PostalCode %}\"{{item.Address.PostalCode | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"city\": {% if item.Address.City %}\"{{item.Address.City | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"stateProvince\": \r\n                                {\r\n                                    \"stateProvinceCode\": {% if item.Address.StateProvince.StateProvinceCode %}\"{{item.Address.StateProvince.StateProvinceCode | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"name\": {% if item.Address.StateProvince.Name %}\"{{item.Address.StateProvince.Name | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"countryRegion\": \r\n                                    {\r\n                                        \"countryRegionCode\": {% if item.Address.StateProvince.CountryRegion.CountryRegionCode %}\"{{item.Address.StateProvince.CountryRegion.CountryRegionCode | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                        \"name\": {% if item.Address.StateProvince.CountryRegion.Name %}\"{{item.Address.StateProvince.CountryRegion.Name | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        {% endJSONArrayFor -%}\r\n                    ],\r\n                    \"ContactInfo\": \r\n                    [\r\n                        {% JSONArrayFor item in body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Person.ContactInfo -%}\r\n                        {\r\n                            \"contactInfoChannelType\": {% if item.ContactInfoChannelType %}\"{{item.ContactInfoChannelType | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"contactInfoType\": {% if item.ContactInfoType %}\"{{item.ContactInfoType | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"value\": {% if item.Value %}\"{{item.Value | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                        }\r\n                        {% endJSONArrayFor -%}\r\n                    ]\r\n                },{% endif %}\r\n                {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store %}\"store\": \r\n                {\r\n                    \"name\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store.Name %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store.Name | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"salesPerson\": \r\n                    {\r\n                        \"firstName\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store.SalesPerson.FirstName %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store.SalesPerson.FirstName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"middleName\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store.SalesPerson.MiddleName %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store.SalesPerson.MiddleName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"lastName\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store.SalesPerson.LastName %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store.SalesPerson.LastName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"fullName\": {% if body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store.SalesPerson.FullName %}\"{{body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store.SalesPerson.FullName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                    },\r\n                    \"Addresses\": \r\n                    [\r\n                        {% JSONArrayFor item in body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store.Addresses -%}\r\n                        {\r\n                            \"addressType\": {% if item.AddressType %}\"{{item.AddressType | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"address\": \r\n                            {\r\n                                \"addressLine1\": {% if item.Address.AddressLine1 %}\"{{item.Address.AddressLine1 | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"addressLine2\": {% if item.Address.AddressLine2 %}\"{{item.Address.AddressLine2 | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"postalCode\": {% if item.Address.PostalCode %}\"{{item.Address.PostalCode | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"city\": {% if item.Address.City %}\"{{item.Address.City | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"stateProvince\": \r\n                                {\r\n                                    \"stateProvinceCode\": {% if item.Address.StateProvince.StateProvinceCode %}\"{{item.Address.StateProvince.StateProvinceCode | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"name\": {% if item.Address.StateProvince.Name %}\"{{item.Address.StateProvince.Name | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"countryRegion\": \r\n                                    {\r\n                                        \"countryRegionCode\": {% if item.Address.StateProvince.CountryRegion.CountryRegionCode %}\"{{item.Address.StateProvince.CountryRegion.CountryRegionCode | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                        \"name\": {% if item.Address.StateProvince.CountryRegion.Name %}\"{{item.Address.StateProvince.CountryRegion.Name | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        {% endJSONArrayFor -%}\r\n                    ],\r\n                    \"Contacts\": \r\n                    [\r\n                        {% JSONArrayFor item in body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.Store.Contacts -%}\r\n                        {\r\n                            \"contactType\": {% if item.ContactType %}\"{{item.ContactType | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"contact\": \r\n                            {\r\n                                \"title\": {% if item.Contact.Title %}\"{{item.Contact.Title | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"firstName\": {% if item.Contact.FirstName %}\"{{item.Contact.FirstName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"middleName\": {% if item.Contact.MiddleName %}\"{{item.Contact.MiddleName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"lastName\": {% if item.Contact.LastName %}\"{{item.Contact.LastName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"fullName\": {% if item.Contact.FullName %}\"{{item.Contact.FullName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"suffix\": {% if item.Contact.Suffix %}\"{{item.Contact.Suffix | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                            },\r\n                            \"emailAddress\": {% if item.EmailAddress %}\"{{item.EmailAddress | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                        }\r\n                        {% endJSONArrayFor -%}\r\n                    ]\r\n                },{% endif %}\r\n                \"SalesOrders\": \r\n                [\r\n                    {% JSONArrayFor item in body.envelope.body.GetCustomerResponse.GetCustomerResult.Customer.SalesOrders -%}\r\n                    {\r\n                        \"revisionNumber\": {% if item.RevisionNumber %}\"{{item.RevisionNumber | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"orderDate\": {% if item.OrderDate %}\"{{item.OrderDate | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"dueDate\": {% if item.DueDate %}\"{{item.DueDate | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"shipDate\": {% if item.ShipDate %}\"{{item.ShipDate | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"status\": {% if item.Status %}\"{{item.Status | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"onlineOrderFlag\": {% if item.OnlineOrderFlag %}{{item.OnlineOrderFlag}}{% else %} null {% endif %},\r\n                        \"salesOrderNumber\": {% if item.SalesOrderNumber %}\"{{item.SalesOrderNumber | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"purchaseOrderNumber\": {% if item.PurchaseOrderNumber %}\"{{item.PurchaseOrderNumber | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"accountNumber\": {% if item.AccountNumber %}\"{{item.AccountNumber | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"salesPerson\": {% if item.SalesPerson %}\"{{item.SalesPerson | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"territory\": {% if item.Territory %}\"{{item.Territory | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"subTotal\": {% if item.SubTotal %}{{item.SubTotal}}{% else %} null {% endif %},\r\n                        \"taxAmt\": {% if item.TaxAmt %}{{item.TaxAmt}}{% else %} null {% endif %},\r\n                        \"freight\": {% if item.Freight %}{{item.Freight}}{% else %} null {% endif %},\r\n                        \"totalDue\": {% if item.TotalDue %}{{item.TotalDue}}{% else %} null {% endif %}\r\n                    }\r\n                    {% endJSONArrayFor -%}\r\n                ]\r\n            }\r\n        }</set-body>\r\n      </when>\r\n      <otherwise>\r\n        <set-variable name=\"old-body\" value=\"@(context.Response.Body.As&lt;string&gt;(preserveContent: true))\" />\r\n        <!-- Error response as per https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#7102-error-condition-responses -->\r\n        <set-body template=\"liquid\">{\r\n            \"error\": {\r\n                \"code\": \"{{body.envelope.body.fault.faultcode}}\",\r\n                \"message\": \"{{body.envelope.body.fault.faultstring}}\"\r\n            }\r\n        }</set-body>\r\n        <choose>\r\n          <when condition=\"@(string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;code&quot;].ToString()) &amp;&amp; string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;message&quot;].ToString()))\">\r\n            <set-body>@{\r\n                    var newResponseBody = new JObject();\r\n                    newResponseBody[\"error\"] = new JObject();\r\n                    newResponseBody[\"error\"][\"code\"] = \"InvalidErrorResponseBody\";\r\n                    if (string.IsNullOrEmpty((string)context.Variables[\"old-body\"]))\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was empty.\";\r\n                    }\r\n                    else\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was: '\" + context.Variables[\"old-body\"] + \"'.\";\r\n                    }\r\n                    return newResponseBody.ToString();\r\n                }</set-body>\r\n          </when>\r\n        </choose>\r\n      </otherwise>\r\n    </choose>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>application/json</value>\r\n    </set-header>\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>",
                "format": "xml"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/ListCustomers')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "displayName": "ListCustomers",
                "method": "GET",
                "urlTemplate": "/?pageIndex={pageIndex}&pageSize={pageSize}",
                "templateParameters": [
                    {
                        "name": "pageIndex",
                        "type": "integer",
                        "required": true,
                        "values": []
                    },
                    {
                        "name": "pageSize",
                        "type": "integer",
                        "required": true,
                        "values": []
                    }
                ],
                "description": "ListCustomers",
                "request": {
                    "description": "ICustomerService_ListCustomers_InputMessage",
                    "queryParameters": [
                        {
                            "name": "customerType",
                            "type": "string",
                            "values": []
                        },
                        {
                            "name": "territory",
                            "type": "string",
                            "values": []
                        }
                    ],
                    "headers": [],
                    "representations": [
                        {
                            "contentType": "application/json",
                            "sample": "{\r\n  \"listCustomers\": {\r\n    \"request\": {\r\n      \"pageIndex\": 1,\r\n      \"pageSize\": 1,\r\n      \"territory\": \"sample\",\r\n      \"customerType\": \"sample\"\r\n    }\r\n  }\r\n}",
                            "typeName": "ListCustomers"
                        }
                    ]
                },
                "responses": [
                    {
                        "statusCode": 200,
                        "description": "ICustomerService_ListCustomers_OutputMessage",
                        "representations": [
                            {
                                "contentType": "application/json",
                                "sample": "{\r\n  \"listCustomersResponse\": {\r\n    \"listCustomersResult\": {\r\n      \"totalCustomers\": 1,\r\n      \"customers\": [\r\n        {\r\n          \"accountNumber\": \"sample\",\r\n          \"salesTerritoryName\": \"sample\",\r\n          \"person\": {\r\n            \"title\": \"sample\",\r\n            \"firstName\": \"sample\",\r\n            \"middleName\": \"sample\",\r\n            \"lastName\": \"sample\",\r\n            \"fullName\": \"sample\",\r\n            \"suffix\": \"sample\",\r\n            \"emailPromotion\": \"sample\",\r\n            \"addresses\": [\r\n              {\r\n                \"addressType\": \"sample\",\r\n                \"address\": {\r\n                  \"addressLine1\": \"sample\",\r\n                  \"addressLine2\": \"sample\",\r\n                  \"postalCode\": \"sample\",\r\n                  \"city\": \"sample\",\r\n                  \"stateProvince\": {\r\n                    \"stateProvinceCode\": \"sample\",\r\n                    \"name\": \"sample\",\r\n                    \"countryRegion\": {\r\n                      \"countryRegionCode\": \"sample\",\r\n                      \"name\": \"sample\"\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            ],\r\n            \"contactInfo\": [\r\n              {\r\n                \"contactInfoChannelType\": \"sample\",\r\n                \"contactInfoType\": \"sample\",\r\n                \"value\": \"sample\"\r\n              }\r\n            ]\r\n          },\r\n          \"store\": {\r\n            \"name\": \"sample\",\r\n            \"salesPerson\": {\r\n              \"firstName\": \"sample\",\r\n              \"middleName\": \"sample\",\r\n              \"lastName\": \"sample\",\r\n              \"fullName\": \"sample\"\r\n            },\r\n            \"addresses\": [\r\n              {\r\n                \"addressType\": \"sample\",\r\n                \"address\": {\r\n                  \"addressLine1\": \"sample\",\r\n                  \"addressLine2\": \"sample\",\r\n                  \"postalCode\": \"sample\",\r\n                  \"city\": \"sample\",\r\n                  \"stateProvince\": {\r\n                    \"stateProvinceCode\": \"sample\",\r\n                    \"name\": \"sample\",\r\n                    \"countryRegion\": {\r\n                      \"countryRegionCode\": \"sample\",\r\n                      \"name\": \"sample\"\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            ],\r\n            \"contacts\": [\r\n              {\r\n                \"contactType\": \"sample\",\r\n                \"contact\": {\r\n                  \"title\": \"sample\",\r\n                  \"firstName\": \"sample\",\r\n                  \"middleName\": \"sample\",\r\n                  \"lastName\": \"sample\",\r\n                  \"fullName\": \"sample\",\r\n                  \"suffix\": \"sample\"\r\n                },\r\n                \"emailAddress\": \"sample\"\r\n              }\r\n            ]\r\n          },\r\n          \"salesOrders\": [\r\n            {\r\n              \"revisionNumber\": 1,\r\n              \"orderDate\": {},\r\n              \"dueDate\": {},\r\n              \"shipDate\": {},\r\n              \"status\": \"sample\",\r\n              \"onlineOrderFlag\": false,\r\n              \"salesOrderNumber\": \"sample\",\r\n              \"purchaseOrderNumber\": \"sample\",\r\n              \"accountNumber\": \"sample\",\r\n              \"salesPerson\": \"sample\",\r\n              \"territory\": \"sample\",\r\n              \"subTotal\": 1,\r\n              \"taxAmt\": 1,\r\n              \"freight\": 1,\r\n              \"totalDue\": 1\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}",
                                "typeName": "ListCustomersResponse"
                            }
                        ],
                        "headers": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations/policies",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/ListCustomers/policy')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('apim-name'), 'customer-api', 'ListCustomers')]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "value": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <rewrite-uri template=\"/CustomerService.svc\" copy-unmatched-params=\"false\" />\r\n    <set-method>POST</set-method>\r\n    <set-header name=\"SOAPAction\" exists-action=\"override\">\r\n      <value>\"ListCustomers\"</value>\r\n    </set-header>\r\n    <set-body template=\"liquid\">\r\n      <soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"http://services.aw.com/CustomerService/1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n        <soap:Body>\r\n          <ListCustomers>\r\n            <request>\r\n                    {% if context.Request.OriginalUrl.Query.pageIndex != null %}\r\n                    <PageIndex>{{context.Request.OriginalUrl.Query.pageIndex}}</PageIndex>\r\n                    {% else %}\r\n                    <PageIndex xsi:nil=\"true\" />\r\n                    {% endif %}\r\n                    {% if context.Request.OriginalUrl.Query.pageSize != null %}\r\n                    <PageSize>{{context.Request.OriginalUrl.Query.pageSize}}</PageSize>\r\n                    {% else %}\r\n                    <PageSize xsi:nil=\"true\" />\r\n                    {% endif %}\r\n                    {% if context.Request.OriginalUrl.Query.territory %}\r\n                    <Territory>{{context.Request.OriginalUrl.Query.territory}}</Territory>\r\n                    {% endif %}\r\n                    {% if context.Request.OriginalUrl.Query.customerType %}\r\n                    <CustomerType>{{context.Request.OriginalUrl.Query.customerType}}</CustomerType>\r\n                    {% endif %}\r\n                </request>\r\n          </ListCustomers>\r\n        </soap:Body>\r\n      </soap:Envelope>\r\n    </set-body>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>text/xml</value>\r\n    </set-header>\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <choose>\r\n      <when condition=\"@(context.Response.StatusCode &lt; 400)\">\r\n        <set-body template=\"liquid\">\r\n        {\r\n            \r\n            \"totalCustomers\": {% if body.envelope.body.ListCustomersResponse.ListCustomersResult.TotalCustomers %}{{body.envelope.body.ListCustomersResponse.ListCustomersResult.TotalCustomers}}{% else %} null {% endif %},\r\n            \"customers\": \r\n            [\r\n                {% JSONArrayFor item in body.envelope.body.ListCustomersResponse.ListCustomersResult.Customers -%}\r\n                {\r\n                    \"accountNumber\": {% if item.AccountNumber %}\"{{item.AccountNumber | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"salesTerritoryName\": {% if item.SalesTerritoryName %}\"{{item.SalesTerritoryName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    {% if item.Person %}\"person\":\r\n                    {\r\n                        \"title\": {% if item.Person.Title %}\"{{item.Person.Title | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"firstName\": {% if item.Person.FirstName %}\"{{item.Person.FirstName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"middleName\": {% if item.Person.MiddleName %}\"{{item.Person.MiddleName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"lastName\": {% if item.Person.LastName %}\"{{item.Person.LastName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"fullName\": {% if item.Person.FullName %}\"{{item.Person.FullName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"suffix\": {% if item.Person.Suffix %}\"{{item.Person.Suffix | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"emailPromotion\": {% if item.Person.EmailPromotion %}\"{{item.Person.EmailPromotion | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"Addresses\": \r\n                        [\r\n                            {% JSONArrayFor item2 in item.Person.Addresses -%}\r\n                            {\r\n                                \"addressType\": {% if item2.AddressType %}\"{{item2.AddressType | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"address\": \r\n                                {\r\n                                    \"addressLine1\": {% if item2.Address.AddressLine1 %}\"{{item2.Address.AddressLine1 | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"addressLine2\": {% if item2.Address.AddressLine2 %}\"{{item2.Address.AddressLine2 | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"postalCode\": {% if item2.Address.PostalCode %}\"{{item2.Address.PostalCode | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"city\": {% if item2.Address.City %}\"{{item2.Address.City | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"stateProvince\": \r\n                                    {\r\n                                        \"stateProvinceCode\": {% if item2.Address.StateProvince.StateProvinceCode %}\"{{item2.Address.StateProvince.StateProvinceCode | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                        \"name\": {% if item2.Address.StateProvince.Name %}\"{{item2.Address.StateProvince.Name | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                        \"countryRegion\": \r\n                                        {\r\n                                            \"countryRegionCode\": {% if item2.Address.StateProvince.CountryRegion.CountryRegionCode %}\"{{item2.Address.StateProvince.CountryRegion.CountryRegionCode | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                            \"name\": {% if item2.Address.StateProvince.CountryRegion.Name %}\"{{item2.Address.StateProvince.CountryRegion.Name | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                            {% endJSONArrayFor -%}\r\n                        ],\r\n                        \"ContactInfo\": \r\n                        [\r\n                            {% JSONArrayFor item2 in item.Person.ContactInfo -%}\r\n                            {\r\n                                \"contactInfoChannelType\": {% if item2.ContactInfoChannelType %}\"{{item2.ContactInfoChannelType | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"contactInfoType\": {% if item2.ContactInfoType %}\"{{item2.ContactInfoType | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"value\": {% if item2.Value %}\"{{item2.Value | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                            }\r\n                            {% endJSONArrayFor -%}\r\n                        ]\r\n                    },{% endif %}\r\n                    {% if item.Store %}\"store\":\r\n                    {\r\n                        \"name\": {% if item.Store.Name %}\"{{item.Store.Name | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"salesPerson\": \r\n                        {\r\n                            \"firstName\": {% if item.Store.SalesPerson.FirstName %}\"{{item.Store.SalesPerson.FirstName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"middleName\": {% if item.Store.SalesPerson.MiddleName %}\"{{item.Store.SalesPerson.MiddleName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"lastName\": {% if item.Store.SalesPerson.LastName %}\"{{item.Store.SalesPerson.LastName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"fullName\": {% if item.Store.SalesPerson.FullName %}\"{{item.Store.SalesPerson.FullName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                        },\r\n                        \"Addresses\": \r\n                        [\r\n                            {% JSONArrayFor item2 in item.Store.Addresses -%}\r\n                            {\r\n                                \"addressType\": {% if item2.AddressType %}\"{{item2.AddressType | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"address\": \r\n                                {\r\n                                    \"addressLine1\": {% if item2.Address.AddressLine1 %}\"{{item2.Address.AddressLine1 | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"addressLine2\": {% if item2.Address.AddressLine2 %}\"{{item2.Address.AddressLine2 | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"postalCode\": {% if item2.Address.PostalCode %}\"{{item2.Address.PostalCode | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"city\": {% if item2.Address.City %}\"{{item2.Address.City | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"stateProvince\": \r\n                                    {\r\n                                        \"stateProvinceCode\": {% if item2.Address.StateProvince.StateProvinceCode %}\"{{item2.Address.StateProvince.StateProvinceCode | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                        \"name\": {% if item2.Address.StateProvince.Name %}\"{{item2.Address.StateProvince.Name | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                        \"countryRegion\": \r\n                                        {\r\n                                            \"countryRegionCode\": {% if item2.Address.StateProvince.CountryRegion.CountryRegionCode %}\"{{item2.Address.StateProvince.CountryRegion.CountryRegionCode | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                            \"name\": {% if item2.Address.StateProvince.CountryRegion.Name %}\"{{item2.Address.StateProvince.CountryRegion.Name | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                            {% endJSONArrayFor -%}\r\n                        ],\r\n                        \"Contacts\": \r\n                        [\r\n                            {% JSONArrayFor item2 in item.Store.Contacts -%}\r\n                            {\r\n                                \"contactType\": {% if item2.ContactType %}\"{{item2.ContactType | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                \"contact\": \r\n                                {\r\n                                    \"title\": {% if item2.Contact.Title %}\"{{item2.Contact.Title | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"firstName\": {% if item2.Contact.FirstName %}\"{{item2.Contact.FirstName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"middleName\": {% if item2.Contact.MiddleName %}\"{{item2.Contact.MiddleName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"lastName\": {% if item2.Contact.LastName %}\"{{item2.Contact.LastName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"fullName\": {% if item2.Contact.FullName %}\"{{item2.Contact.FullName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                                    \"suffix\": {% if item2.Contact.Suffix %}\"{{item2.Contact.Suffix | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                                },\r\n                                \"emailAddress\": {% if item2.EmailAddress %}\"{{item2.EmailAddress | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                            }\r\n                            {% endJSONArrayFor -%}\r\n                        ]\r\n                    },{% endif %}\r\n                    \"SalesOrders\": \r\n                    [\r\n                        {% JSONArrayFor item2 in item.SalesOrders -%}\r\n                        {\r\n                            \"revisionNumber\": {% if item2.RevisionNumber %}\"{{item2.RevisionNumber | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"orderDate\": {% if item2.OrderDate %}\"{{item2.OrderDate | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"dueDate\": {% if item2.DueDate %}\"{{item2.DueDate | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"shipDate\": {% if item2.ShipDate %}\"{{item2.ShipDate | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"status\": {% if item2.Status %}\"{{item2.Status | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"onlineOrderFlag\": {% if item2.OnlineOrderFlag %}{{item2.OnlineOrderFlag}}{% else %} null {% endif %},\r\n                            \"salesOrderNumber\": {% if item2.SalesOrderNumber %}\"{{item2.SalesOrderNumber | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"purchaseOrderNumber\": {% if item2.PurchaseOrderNumber %}\"{{item2.PurchaseOrderNumber | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"accountNumber\": {% if item2.AccountNumber %}\"{{item2.AccountNumber | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"salesPerson\": {% if item2.SalesPerson %}\"{{item2.SalesPerson | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"territory\": {% if item2.Territory %}\"{{item2.Territory | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                            \"subTotal\": {% if item2.SubTotal %}{{item2.SubTotal}}{% else %} null {% endif %},\r\n                            \"taxAmt\": {% if item2.TaxAmt %}{{item2.TaxAmt}}{% else %} null {% endif %},\r\n                            \"freight\": {% if item2.Freight %}{{item2.Freight}}{% else %} null {% endif %},\r\n                            \"totalDue\": {% if item2.TotalDue %}{{item2.TotalDue}}{% else %} null {% endif %}\r\n                        }\r\n                        {% endJSONArrayFor -%}\r\n                    ]\r\n                }\r\n                {% endJSONArrayFor -%}\r\n            ]\r\n        }</set-body>\r\n      </when>\r\n      <otherwise>\r\n        <set-variable name=\"old-body\" value=\"@(context.Response.Body.As&lt;string&gt;(preserveContent: true))\" />\r\n        <!-- Error response as per https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#7102-error-condition-responses -->\r\n        <set-body template=\"liquid\">{\r\n            \"error\": {\r\n                \"code\": \"{{body.envelope.body.fault.faultcode}}\",\r\n                \"message\": \"{{body.envelope.body.fault.faultstring}}\"\r\n            }\r\n        }</set-body>\r\n        <choose>\r\n          <when condition=\"@(string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;code&quot;].ToString()) &amp;&amp; string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;message&quot;].ToString()))\">\r\n            <set-body>@{\r\n                    var newResponseBody = new JObject();\r\n                    newResponseBody[\"error\"] = new JObject();\r\n                    newResponseBody[\"error\"][\"code\"] = \"InvalidErrorResponseBody\";\r\n                    if (string.IsNullOrEmpty((string)context.Variables[\"old-body\"]))\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was empty.\";\r\n                    }\r\n                    else\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was: '\" + context.Variables[\"old-body\"] + \"'.\";\r\n                    }\r\n                    return newResponseBody.ToString();\r\n                }</set-body>\r\n          </when>\r\n        </choose>\r\n      </otherwise>\r\n    </choose>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>application/json</value>\r\n    </set-header>\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>",
                "format": "xml"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/UpdateCustomer')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "displayName": "UpdateCustomer",
                "method": "PUT",
                "urlTemplate": "/{accountNumber}",
                "templateParameters": [
                    {
                        "name": "accountNumber",
                        "type": "string",
                        "required": true,
                        "values": []
                    }
                ],
                "description": "UpdateCustomer",
                "request": {
                    "description": "ICustomerService_UpdateCustomer_InputMessage",
                    "queryParameters": [],
                    "headers": [],
                    "representations": [
                        {
                            "contentType": "application/json",
                            "sample": "{\r\n  \"customer\": {\r\n    \"salesTerritoryName\": \"sample\",\r\n    \"person\": {\r\n      \"title\": \"sample\",\r\n      \"firstName\": \"sample\",\r\n      \"middleName\": \"sample\",\r\n      \"lastName\": \"sample\",\r\n      \"fullName\": \"sample\",\r\n      \"suffix\": \"sample\",\r\n      \"emailPromotion\": \"sample\"\r\n    },\r\n    \"store\": {\r\n      \"name\": \"sample\",\r\n      \"salesPerson\": {\r\n        \"firstName\": \"sample\",\r\n        \"middleName\": \"sample\",\r\n        \"lastName\": \"sample\"\r\n      }\r\n    }\r\n  }\r\n}",
                            "typeName": "UpdateCustomer"
                        }
                    ]
                },
                "responses": [
                    {
                        "statusCode": 200,
                        "description": "ICustomerService_UpdateCustomer_OutputMessage",
                        "representations": [
                            {
                                "contentType": "application/json",
                                "sample": "{\r\n  \"customer\": {\r\n    \"salesTerritoryName\": \"sample\",\r\n    \"person\": {\r\n      \"title\": \"sample\",\r\n      \"firstName\": \"sample\",\r\n      \"middleName\": \"sample\",\r\n      \"lastName\": \"sample\",\r\n      \"fullName\": \"sample\",\r\n      \"suffix\": \"sample\",\r\n      \"emailPromotion\": \"sample\"\r\n    },\r\n    \"store\": {\r\n      \"name\": \"sample\",\r\n      \"salesPerson\": {\r\n        \"firstName\": \"sample\",\r\n        \"middleName\": \"sample\",\r\n        \"lastName\": \"sample\"\r\n      }\r\n    }\r\n  }\r\n}",
                                "typeName": "UpdateCustomerResponse"
                            }
                        ],
                        "headers": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations/policies",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/UpdateCustomer/policy')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('apim-name'), 'customer-api', 'UpdateCustomer')]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "value": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <rewrite-uri template=\"/CustomerService.svc\" copy-unmatched-params=\"false\" />\r\n    <set-header name=\"SOAPAction\" exists-action=\"override\">\r\n      <value>\"UpdateCustomer\"</value>\r\n    </set-header>\r\n    <set-body template=\"liquid\">\r\n      <soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"http://services.aw.com/CustomerService/1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n        <soap:Body>\r\n          <UpdateCustomer>\r\n            <request>\r\n              <Customer>\r\n                                {% if context.Request.MatchedParameters[\"accountNumber\"] != null %}\r\n                                <AccountNumber>{{context.Request.MatchedParameters[\"accountNumber\"]}}</AccountNumber>                \r\n                                {% else %}\r\n                                <AccountNumber xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                                {% if body.customer.salesTerritoryName %}\r\n                                <SalesTerritoryName>{{body.customer.salesTerritoryName}}</SalesTerritoryName>\r\n                                {% else %}\r\n                                <SalesTerritoryName xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                                {% if body.customer.person %}\r\n                                <Person>\r\n                                    {% if body.customer.person.title %}\r\n                                    <Title>{{body.customer.person.title}}</Title>\r\n                                    {% else %}\r\n                                    <Title xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customer.person.firstName %}\r\n                                    <FirstName>{{body.customer.person.firstName}}</FirstName>\r\n                                    {% else %}\r\n                                    <FirstName xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customer.person.middleName %}\r\n                                    <MiddleName>{{body.customer.person.middleName}}</MiddleName>\r\n                                    {% else %}\r\n                                    <MiddleName xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customer.person.lastName %}\r\n                                    <LastName>{{body.customer.person.lastName}}</LastName>\r\n                                    {% else %}\r\n                                    <LastName xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customer.person.fullName %}\r\n                                    <FullName>{{body.customer.person.fullName}}</FullName>\r\n                                    {% else %}\r\n                                    <FullName xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customer.person.suffix %}\r\n                                    <Suffix>{{body.customer.person.suffix}}</Suffix>\r\n                                    {% else %}\r\n                                    <Suffix xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customer.person.emailPromotion %}\r\n                                    <EmailPromotion>{{body.customer.person.emailPromotion}}</EmailPromotion>\r\n                                    {% else %}\r\n                                    <EmailPromotion xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                </Person>\r\n                                {% endif %}\r\n                                {% if body.customer.store %}\r\n                                <Store>\r\n                                    {% if body.customer.store.name %}\r\n                                    <Name>{{body.customer.store.name}}</Name>\r\n                                    {% else %}\r\n                                    <Name xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    <SalesPerson>\r\n                                        {% if body.customer.store.salesPerson.firstName %}\r\n                                        <FirstName>{{body.customer.store.salesPerson.firstName}}</FirstName>\r\n                                        {% else %}\r\n                                        <FirstName xsi:nil=\"true\" />\r\n                                        {% endif %}\r\n                                        {% if body.customer.store.salesPerson.middleName %}\r\n                                        <MiddleName>{{body.customer.store.salesPerson.middleName}}</MiddleName>\r\n                                        {% else %}\r\n                                        <MiddleName xsi:nil=\"true\" />\r\n                                        {% endif %}\r\n                                        {% if body.customer.store.salesPerson.lastName %}\r\n                                        <LastName>{{body.customer.store.salesPerson.lastName}}</LastName>\r\n                                        {% else %}\r\n                                        <LastName xsi:nil=\"true\" />\r\n                                        {% endif %}\r\n                                    </SalesPerson></Store>\r\n                                {% endif %}\r\n                            </Customer>\r\n            </request>\r\n          </UpdateCustomer>\r\n        </soap:Body>\r\n      </soap:Envelope>\r\n    </set-body>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>text/xml</value>\r\n    </set-header>\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <choose>\r\n      <when condition=\"@(context.Response.StatusCode &lt; 400)\">\r\n        <set-body template=\"liquid\">\r\n        {\r\n            \"customer\": \r\n            {\r\n                \"accountNumber\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.AccountNumber %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.AccountNumber | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                \"salesTerritoryName\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.SalesTerritoryName %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.SalesTerritoryName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                \"person\": \r\n                {\r\n                    \"title\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.Title %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.Title | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"firstName\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.FirstName %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.FirstName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"middleName\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.MiddleName %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.MiddleName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"lastName\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.LastName %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.LastName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"fullName\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.FullName %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.FullName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"suffix\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.Suffix %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.Suffix | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"emailPromotion\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.EmailPromotion %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Person.EmailPromotion | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                },\r\n                \"store\": \r\n                {\r\n                    \"name\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Store.Name %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Store.Name | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                    \"salesPerson\": \r\n                    {\r\n                        \"firstName\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Store.SalesPerson.FirstName %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Store.SalesPerson.FirstName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"middleName\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Store.SalesPerson.MiddleName %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Store.SalesPerson.MiddleName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %},\r\n                        \"lastName\": {% if body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Store.SalesPerson.LastName %}\"{{body.envelope.body.UpdateCustomerResponse.UpdateCustomerResult.Customer.Store.SalesPerson.LastName | Replace: '\\r', '\\r' | Replace: '\\n', '\\n' | Replace: '([^\\\\](\\\\\\\\)*)\"', '$1\\\"'}}\"{% else %} null {% endif %}\r\n                    }\r\n                }\r\n            }\r\n        }</set-body>\r\n      </when>\r\n      <otherwise>\r\n        <set-variable name=\"old-body\" value=\"@(context.Response.Body.As&lt;string&gt;(preserveContent: true))\" />\r\n        <!-- Error response as per https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#7102-error-condition-responses -->\r\n        <set-body template=\"liquid\">{\r\n            \"error\": {\r\n                \"code\": \"{{body.envelope.body.fault.faultcode}}\",\r\n                \"message\": \"{{body.envelope.body.fault.faultstring}}\"\r\n            }\r\n        }</set-body>\r\n        <choose>\r\n          <when condition=\"@(string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;code&quot;].ToString()) &amp;&amp; string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;message&quot;].ToString()))\">\r\n            <set-body>@{\r\n                    var newResponseBody = new JObject();\r\n                    newResponseBody[\"error\"] = new JObject();\r\n                    newResponseBody[\"error\"][\"code\"] = \"InvalidErrorResponseBody\";\r\n                    if (string.IsNullOrEmpty((string)context.Variables[\"old-body\"]))\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was empty.\";\r\n                    }\r\n                    else\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was: '\" + context.Variables[\"old-body\"] + \"'.\";\r\n                    }\r\n                    return newResponseBody.ToString();\r\n                }</set-body>\r\n          </when>\r\n        </choose>\r\n      </otherwise>\r\n    </choose>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>application/json</value>\r\n    </set-header>\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>",
                "format": "xml"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/UpdateCustomerAddress')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "displayName": "UpdateCustomerAddress",
                "method": "PUT",
                "urlTemplate": "/{accountNumber}/addresses/{addressType}",
                "templateParameters": [
                    {
                        "name": "accountNumber",
                        "type": "string",
                        "required": true,
                        "values": []
                    },
                    {
                        "name": "addressType",
                        "type": "string",
                        "required": true,
                        "values": []
                    }
                ],
                "description": "UpdateCustomerAddress",
                "request": {
                    "description": "ICustomerService_UpdateCustomerAddress_InputMessage",
                    "queryParameters": [],
                    "headers": [],
                    "representations": [
                        {
                            "contentType": "application/json",
                            "sample": "{\r\n  \"address\": {\r\n    \"addressLine1\": \"sample\",\r\n    \"addressLine2\": \"sample\",\r\n    \"postalCode\": \"sample\",\r\n    \"city\": \"sample\",\r\n    \"stateProvinceCode\": \"sample\"\r\n  }\r\n}",
                            "typeName": "UpdateCustomerAddress"
                        }
                    ]
                },
                "responses": [
                    {
                        "statusCode": 200,
                        "description": "ICustomerService_UpdateCustomerAddress_OutputMessage",
                        "representations": [
                            {
                                "contentType": "application/json",
                                "sample": "{\r\n  \"updateCustomerAddressResponse\": {\r\n    \"updateCustomerAddressResult\": {}\r\n  }\r\n}",
                                "typeName": "UpdateCustomerAddressResponse"
                            }
                        ],
                        "headers": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations/policies",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/UpdateCustomerAddress/policy')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('apim-name'), 'customer-api', 'UpdateCustomerAddress')]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "value": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <rewrite-uri template=\"/CustomerService.svc\" copy-unmatched-params=\"false\" />\r\n    <set-header name=\"SOAPAction\" exists-action=\"override\">\r\n      <value>\"UpdateCustomerAddress\"</value>\r\n    </set-header>\r\n    <set-body template=\"liquid\">\r\n      <soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"http://services.aw.com/CustomerService/1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n        <soap:Body>\r\n          <UpdateCustomerAddress>\r\n            <request>\r\n                            {% if context.Request.MatchedParameters[\"accountNumber\"] != null %}\r\n                            <AccountNumber>{{context.Request.MatchedParameters[\"accountNumber\"]}}</AccountNumber>                \r\n                            {% else %}\r\n                            <AccountNumber xsi:nil=\"true\" />\r\n                            {% endif %}\r\n                            <CustomerAddress>\r\n                                {% if context.Request.MatchedParameters[\"addressType\"] != null %}\r\n                                <AddressType xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerAddress\">{{context.Request.MatchedParameters[\"addressType\"]}}</AddressType>\r\n                                {% else %}\r\n                                <AddressType xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerAddress\" xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                                <Address>\r\n                                    {% if body.address.addressLine1 %}\r\n                                    <AddressLine1 xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerAddress\">{{body.address.addressLine1}}</AddressLine1>\r\n                                    {% else %}\r\n                                    <AddressLine1 xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerAddress\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.address.addressLine2 %}\r\n                                    <AddressLine2 xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerAddress\">{{body.address.addressLine2}}</AddressLine2>\r\n                                    {% else %}\r\n                                    <AddressLine2 xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerAddress\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.address.postalCode %}\r\n                                    <PostalCode xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerAddress\">{{body.address.postalCode}}</PostalCode>\r\n                                    {% else %}\r\n                                    <PostalCode xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerAddress\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.address.city %}\r\n                                    <City xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerAddress\">{{body.address.city}}</City>\r\n                                    {% else %}\r\n                                    <City xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerAddress\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.address.stateProvinceCode %}\r\n                                    <StateProvinceCode xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerAddress\">{{body.address.stateProvinceCode}}</StateProvinceCode>\r\n                                    {% else %}\r\n                                    <StateProvinceCode xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerAddress\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                </Address></CustomerAddress></request>\r\n          </UpdateCustomerAddress>\r\n        </soap:Body>\r\n      </soap:Envelope>\r\n    </set-body>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>text/xml</value>\r\n    </set-header>\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <choose>\r\n      <when condition=\"@(context.Response.StatusCode &lt; 400)\">\r\n        <set-body template=\"liquid\">\r\n        {\r\n            \"updateCustomerAddressResponse\": \r\n            {\r\n                \"updateCustomerAddressResult\": \r\n                {\r\n                }\r\n            }\r\n        }</set-body>\r\n      </when>\r\n      <otherwise>\r\n        <set-variable name=\"old-body\" value=\"@(context.Response.Body.As&lt;string&gt;(preserveContent: true))\" />\r\n        <!-- Error response as per https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#7102-error-condition-responses -->\r\n        <set-body template=\"liquid\">{\r\n            \"error\": {\r\n                \"code\": \"{{body.envelope.body.fault.faultcode}}\",\r\n                \"message\": \"{{body.envelope.body.fault.faultstring}}\"\r\n            }\r\n        }</set-body>\r\n        <choose>\r\n          <when condition=\"@(string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;code&quot;].ToString()) &amp;&amp; string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;message&quot;].ToString()))\">\r\n            <set-body>@{\r\n                    var newResponseBody = new JObject();\r\n                    newResponseBody[\"error\"] = new JObject();\r\n                    newResponseBody[\"error\"][\"code\"] = \"InvalidErrorResponseBody\";\r\n                    if (string.IsNullOrEmpty((string)context.Variables[\"old-body\"]))\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was empty.\";\r\n                    }\r\n                    else\r\n                    {\r\n                        newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was: '\" + context.Variables[\"old-body\"] + \"'.\";\r\n                    }\r\n                    return newResponseBody.ToString();\r\n                }</set-body>\r\n          </when>\r\n        </choose>\r\n      </otherwise>\r\n    </choose>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>application/json</value>\r\n    </set-header>\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>",
                "format": "xml"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/UpdateCustomerContact')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "displayName": "UpdateCustomerContact",
                "method": "PUT",
                "urlTemplate": "/{accountNumber}/contacts",
                "templateParameters": [
                    {
                        "name": "accountNumber",
                        "type": "string",
                        "required": true,
                        "values": []
                    }
                ],
                "description": "UpdateCustomerContact",
                "request": {
                    "description": "ICustomerService_UpdateCustomerContact_InputMessage",
                    "queryParameters": [],
                    "headers": [],
                    "representations": [
                        {
                            "contentType": "application/json",
                            "sample": "{\r\n  \"customerContact\": {\r\n    \"contactType\": \"sample\",\r\n    \"contact\": {\r\n      \"title\": \"sample\",\r\n      \"firstName\": \"sample\",\r\n      \"middleName\": \"sample\",\r\n      \"lastName\": \"sample\",\r\n      \"suffix\": \"sample\",\r\n      \"emailAddresses\": [\r\n        {\r\n          \"emailAddress\": \"sample\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}",
                            "typeName": "UpdateCustomerContact"
                        }
                    ]
                },
                "responses": [
                    {
                        "statusCode": 200,
                        "description": "ICustomerService_UpdateCustomerContact_OutputMessage",
                        "representations": [
                            {
                                "contentType": "application/json",
                                "sample": "{}",
                                "typeName": "UpdateCustomerContactResponse"
                            }
                        ],
                        "headers": []
                    }
                ]
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/operations/policies",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/UpdateCustomerContact/policy')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('apim-name'), 'customer-api', 'UpdateCustomerContact')]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "value": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <rewrite-uri template=\"/CustomerService.svc\" copy-unmatched-params=\"false\" />\r\n    <set-header name=\"SOAPAction\" exists-action=\"override\">\r\n      <value>\"UpdateCustomerContact\"</value>\r\n    </set-header>\r\n    <set-body template=\"liquid\">\r\n      <soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"http://services.aw.com/CustomerService/1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n        <soap:Body>\r\n          <UpdateCustomerContact>\r\n            <request>\r\n                            {% if context.Request.MatchedParameters[\"accountNumber\"] != null %}\r\n                            <AccountNumber>{{context.Request.MatchedParameters[\"accountNumber\"]}}</AccountNumber>                \r\n                            {% else %}\r\n                            <AccountNumber xsi:nil=\"true\" />\r\n                            {% endif %}\r\n                            <CustomerContact>\r\n                                {% if body.customerContact.contactType %}\r\n                                <ContactType xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\">{{body.customerContact.contactType}}</ContactType>\r\n                                {% else %}\r\n                                <ContactType xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\" xsi:nil=\"true\" />\r\n                                {% endif %}\r\n                                <Contact>\r\n                                    {% if body.customerContact.contact.title %}\r\n                                    <Title xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\">{{body.customerContact.contact.title}}</Title>\r\n                                    {% else %}\r\n                                    <Title xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customerContact.contact.firstName %}\r\n                                    <FirstName xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\">{{body.customerContact.contact.firstName}}</FirstName>\r\n                                    {% else %}\r\n                                    <FirstName xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customerContact.contact.middleName %}\r\n                                    <MiddleName xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\">{{body.customerContact.contact.middleName}}</MiddleName>\r\n                                    {% else %}\r\n                                    <MiddleName xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customerContact.contact.lastName %}\r\n                                    <LastName xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\">{{body.customerContact.contact.lastName}}</LastName>\r\n                                    {% else %}\r\n                                    <LastName xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    {% if body.customerContact.contact.suffix %}\r\n                                    <Suffix xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\">{{body.customerContact.contact.suffix}}</Suffix>\r\n                                    {% else %}\r\n                                    <Suffix xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\" xsi:nil=\"true\" />\r\n                                    {% endif %}\r\n                                    <EmailAddresses>\r\n                                        {% for item in body.customerContact.contact.emailAddresses -%}\r\n                                        <EmailAddress>\r\n                                            {% if item.emailAddress %}\r\n                                            <EmailAddress xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\">{{item.emailAddress}}</EmailAddress>\r\n                                            {% else %}\r\n                                            <EmailAddress xmlns=\"http://services.aw.com/CustomerService/1.0/UpdateCustomerContact\" xsi:nil=\"true\" />\r\n                                            {% endif %}\r\n                                        </EmailAddress>\r\n                                        {% endfor -%}\r\n                                    </EmailAddresses></Contact></CustomerContact></request>\r\n          </UpdateCustomerContact>\r\n        </soap:Body>\r\n      </soap:Envelope>\r\n    </set-body>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>text/xml</value>\r\n    </set-header>\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <choose>\r\n      <when condition=\"@(context.Response.StatusCode &lt; 400)\">\r\n        <set-body template=\"liquid\">\r\n                    {}\r\n                </set-body>\r\n      </when>\r\n      <otherwise>\r\n        <set-variable name=\"old-body\" value=\"@(context.Response.Body.As&lt;string&gt;(preserveContent: true))\" />\r\n        <!-- Error response as per https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#7102-error-condition-responses -->\r\n        <set-body template=\"liquid\">\r\n                    {\r\n                        \"error\": {\r\n                            \"code\": \"{{body.envelope.body.fault.faultcode}}\",\r\n                            \"message\": \"{{body.envelope.body.fault.faultstring}}\"\r\n                        }\r\n                    }\r\n                </set-body>\r\n        <choose>\r\n          <when condition=\"@(string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;code&quot;].ToString()) &amp;&amp; string.IsNullOrEmpty(context.Response.Body.As&lt;JObject&gt;(preserveContent: true)[&quot;error&quot;][&quot;message&quot;].ToString()))\">\r\n            <set-body>\r\n                        @{\r\n                            var newResponseBody = new JObject();\r\n                            newResponseBody[\"error\"] = new JObject();\r\n                            newResponseBody[\"error\"][\"code\"] = \"InvalidErrorResponseBody\";\r\n                            if (string.IsNullOrEmpty((string)context.Variables[\"old-body\"]))\r\n                            {\r\n                                newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was empty.\";\r\n                            }\r\n                            else\r\n                            {\r\n                                newResponseBody[\"error\"][\"message\"] = \"The error response body was not a valid SOAP error response. The response body was: '\" + context.Variables[\"old-body\"] + \"'.\";\r\n                            }\r\n                            return newResponseBody.ToString();\r\n                        }\r\n                        </set-body>\r\n          </when>\r\n        </choose>\r\n      </otherwise>\r\n    </choose>\r\n    <set-header name=\"Content-Type\" exists-action=\"override\">\r\n      <value>application/json</value>\r\n    </set-header>\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>",
                "format": "xml"
            }
        },
        {
            "type": "Microsoft.ApiManagement/service/apis/schemas",
            "apiVersion": "2020-06-01-preview",
            "name": "[concat(parameters('apim-name'), '/customer-api/5ff73174ffb8c010d47f74fd')]",
            "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('apim-name'), 'customer-api')]"
            ],
            "properties": {
                "contentType": "application/vnd.ms-azure-apim.swagger.definitions+json",
                "document": {
                    "definitions": {
                        "ListCustomers": {
                            "type": "object",
                            "properties": {
                                "listCustomers": {
                                    "type": "object",
                                    "properties": {
                                        "request": {
                                            "type": "object",
                                            "properties": {
                                                "pageIndex": {
                                                    "type": "number"
                                                },
                                                "pageSize": {
                                                    "type": "number"
                                                },
                                                "territory": {
                                                    "type": "string"
                                                },
                                                "customerType": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "example": {
                                "listCustomers": {
                                    "request": {
                                        "pageIndex": 1,
                                        "pageSize": 1,
                                        "territory": "sample",
                                        "customerType": "sample"
                                    }
                                }
                            }
                        },
                        "ListCustomersResponse": {
                            "type": "object",
                            "properties": {
                                "listCustomersResponse": {
                                    "type": "object",
                                    "properties": {
                                        "listCustomersResult": {
                                            "type": "object",
                                            "properties": {
                                                "totalCustomers": {
                                                    "type": "number"
                                                },
                                                "customers": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "accountNumber": {
                                                                "type": "string"
                                                            },
                                                            "salesTerritoryName": {
                                                                "type": "string"
                                                            },
                                                            "person": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "title": {
                                                                        "type": "string"
                                                                    },
                                                                    "firstName": {
                                                                        "type": "string"
                                                                    },
                                                                    "middleName": {
                                                                        "type": "string"
                                                                    },
                                                                    "lastName": {
                                                                        "type": "string"
                                                                    },
                                                                    "fullName": {
                                                                        "type": "string"
                                                                    },
                                                                    "suffix": {
                                                                        "type": "string"
                                                                    },
                                                                    "emailPromotion": {
                                                                        "type": "string"
                                                                    },
                                                                    "addresses": {
                                                                        "type": "array",
                                                                        "items": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                                "addressType": {
                                                                                    "type": "string"
                                                                                },
                                                                                "address": {
                                                                                    "type": "object",
                                                                                    "properties": {
                                                                                        "addressLine1": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "addressLine2": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "postalCode": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "city": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "stateProvince": {
                                                                                            "type": "object",
                                                                                            "properties": {
                                                                                                "stateProvinceCode": {
                                                                                                    "type": "string"
                                                                                                },
                                                                                                "name": {
                                                                                                    "type": "string"
                                                                                                },
                                                                                                "countryRegion": {
                                                                                                    "type": "object",
                                                                                                    "properties": {
                                                                                                        "countryRegionCode": {
                                                                                                            "type": "string"
                                                                                                        },
                                                                                                        "name": {
                                                                                                            "type": "string"
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    },
                                                                    "contactInfo": {
                                                                        "type": "array",
                                                                        "items": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                                "contactInfoChannelType": {
                                                                                    "type": "string"
                                                                                },
                                                                                "contactInfoType": {
                                                                                    "type": "string"
                                                                                },
                                                                                "value": {
                                                                                    "type": "string"
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            },
                                                            "store": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "name": {
                                                                        "type": "string"
                                                                    },
                                                                    "salesPerson": {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "firstName": {
                                                                                "type": "string"
                                                                            },
                                                                            "middleName": {
                                                                                "type": "string"
                                                                            },
                                                                            "lastName": {
                                                                                "type": "string"
                                                                            },
                                                                            "fullName": {
                                                                                "type": "string"
                                                                            }
                                                                        }
                                                                    },
                                                                    "addresses": {
                                                                        "type": "array",
                                                                        "items": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                                "addressType": {
                                                                                    "type": "string"
                                                                                },
                                                                                "address": {
                                                                                    "type": "object",
                                                                                    "properties": {
                                                                                        "addressLine1": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "addressLine2": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "postalCode": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "city": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "stateProvince": {
                                                                                            "type": "object",
                                                                                            "properties": {
                                                                                                "stateProvinceCode": {
                                                                                                    "type": "string"
                                                                                                },
                                                                                                "name": {
                                                                                                    "type": "string"
                                                                                                },
                                                                                                "countryRegion": {
                                                                                                    "type": "object",
                                                                                                    "properties": {
                                                                                                        "countryRegionCode": {
                                                                                                            "type": "string"
                                                                                                        },
                                                                                                        "name": {
                                                                                                            "type": "string"
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    },
                                                                    "contacts": {
                                                                        "type": "array",
                                                                        "items": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                                "contactType": {
                                                                                    "type": "string"
                                                                                },
                                                                                "contact": {
                                                                                    "type": "object",
                                                                                    "properties": {
                                                                                        "title": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "firstName": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "middleName": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "lastName": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "fullName": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "suffix": {
                                                                                            "type": "string"
                                                                                        }
                                                                                    }
                                                                                },
                                                                                "emailAddress": {
                                                                                    "type": "string"
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            },
                                                            "salesOrders": {
                                                                "type": "array",
                                                                "items": {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "revisionNumber": {
                                                                            "type": "number"
                                                                        },
                                                                        "orderDate": {
                                                                            "type": "object"
                                                                        },
                                                                        "dueDate": {
                                                                            "type": "object"
                                                                        },
                                                                        "shipDate": {
                                                                            "type": "object"
                                                                        },
                                                                        "status": {
                                                                            "type": "string"
                                                                        },
                                                                        "onlineOrderFlag": {
                                                                            "type": "boolean"
                                                                        },
                                                                        "salesOrderNumber": {
                                                                            "type": "string"
                                                                        },
                                                                        "purchaseOrderNumber": {
                                                                            "type": "string"
                                                                        },
                                                                        "accountNumber": {
                                                                            "type": "string"
                                                                        },
                                                                        "salesPerson": {
                                                                            "type": "string"
                                                                        },
                                                                        "territory": {
                                                                            "type": "string"
                                                                        },
                                                                        "subTotal": {
                                                                            "type": "number"
                                                                        },
                                                                        "taxAmt": {
                                                                            "type": "number"
                                                                        },
                                                                        "freight": {
                                                                            "type": "number"
                                                                        },
                                                                        "totalDue": {
                                                                            "type": "number"
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "GetCustomer": {
                            "type": "object",
                            "properties": {
                                "getCustomer": {
                                    "type": "object",
                                    "properties": {
                                        "request": {
                                            "type": "object",
                                            "properties": {
                                                "accountNumber": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "example": {
                                "getCustomer": {
                                    "request": {
                                        "accountNumber": "sample"
                                    }
                                }
                            }
                        },
                        "GetCustomerResponse": {
                            "type": "object",
                            "properties": {
                                "getCustomerResponse": {
                                    "type": "object",
                                    "properties": {
                                        "getCustomerResult": {
                                            "type": "object",
                                            "properties": {
                                                "customer": {
                                                    "type": "object",
                                                    "properties": {
                                                        "accountNumber": {
                                                            "type": "string"
                                                        },
                                                        "salesTerritoryName": {
                                                            "type": "string"
                                                        },
                                                        "person": {
                                                            "type": "object",
                                                            "properties": {
                                                                "title": {
                                                                    "type": "string"
                                                                },
                                                                "firstName": {
                                                                    "type": "string"
                                                                },
                                                                "middleName": {
                                                                    "type": "string"
                                                                },
                                                                "lastName": {
                                                                    "type": "string"
                                                                },
                                                                "fullName": {
                                                                    "type": "string"
                                                                },
                                                                "suffix": {
                                                                    "type": "string"
                                                                },
                                                                "emailPromotion": {
                                                                    "type": "string"
                                                                },
                                                                "addresses": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "addressType": {
                                                                                "type": "string"
                                                                            },
                                                                            "address": {
                                                                                "type": "object",
                                                                                "properties": {
                                                                                    "addressLine1": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "addressLine2": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "postalCode": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "city": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "stateProvince": {
                                                                                        "type": "object",
                                                                                        "properties": {
                                                                                            "stateProvinceCode": {
                                                                                                "type": "string"
                                                                                            },
                                                                                            "name": {
                                                                                                "type": "string"
                                                                                            },
                                                                                            "countryRegion": {
                                                                                                "type": "object",
                                                                                                "properties": {
                                                                                                    "countryRegionCode": {
                                                                                                        "type": "string"
                                                                                                    },
                                                                                                    "name": {
                                                                                                        "type": "string"
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                },
                                                                "contactInfo": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "contactInfoChannelType": {
                                                                                "type": "string"
                                                                            },
                                                                            "contactInfoType": {
                                                                                "type": "string"
                                                                            },
                                                                            "value": {
                                                                                "type": "string"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        },
                                                        "store": {
                                                            "type": "object",
                                                            "properties": {
                                                                "name": {
                                                                    "type": "string"
                                                                },
                                                                "salesPerson": {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "firstName": {
                                                                            "type": "string"
                                                                        },
                                                                        "middleName": {
                                                                            "type": "string"
                                                                        },
                                                                        "lastName": {
                                                                            "type": "string"
                                                                        },
                                                                        "fullName": {
                                                                            "type": "string"
                                                                        }
                                                                    }
                                                                },
                                                                "addresses": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "addressType": {
                                                                                "type": "string"
                                                                            },
                                                                            "address": {
                                                                                "type": "object",
                                                                                "properties": {
                                                                                    "addressLine1": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "addressLine2": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "postalCode": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "city": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "stateProvince": {
                                                                                        "type": "object",
                                                                                        "properties": {
                                                                                            "stateProvinceCode": {
                                                                                                "type": "string"
                                                                                            },
                                                                                            "name": {
                                                                                                "type": "string"
                                                                                            },
                                                                                            "countryRegion": {
                                                                                                "type": "object",
                                                                                                "properties": {
                                                                                                    "countryRegionCode": {
                                                                                                        "type": "string"
                                                                                                    },
                                                                                                    "name": {
                                                                                                        "type": "string"
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                },
                                                                "contacts": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "contactType": {
                                                                                "type": "string"
                                                                            },
                                                                            "contact": {
                                                                                "type": "object",
                                                                                "properties": {
                                                                                    "title": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "firstName": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "middleName": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "lastName": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "fullName": {
                                                                                        "type": "string"
                                                                                    },
                                                                                    "suffix": {
                                                                                        "type": "string"
                                                                                    }
                                                                                }
                                                                            },
                                                                            "emailAddress": {
                                                                                "type": "string"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        },
                                                        "salesOrders": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "revisionNumber": {
                                                                        "type": "number"
                                                                    },
                                                                    "orderDate": {
                                                                        "type": "object"
                                                                    },
                                                                    "dueDate": {
                                                                        "type": "object"
                                                                    },
                                                                    "shipDate": {
                                                                        "type": "object"
                                                                    },
                                                                    "status": {
                                                                        "type": "string"
                                                                    },
                                                                    "onlineOrderFlag": {
                                                                        "type": "boolean"
                                                                    },
                                                                    "salesOrderNumber": {
                                                                        "type": "string"
                                                                    },
                                                                    "purchaseOrderNumber": {
                                                                        "type": "string"
                                                                    },
                                                                    "accountNumber": {
                                                                        "type": "string"
                                                                    },
                                                                    "salesPerson": {
                                                                        "type": "string"
                                                                    },
                                                                    "territory": {
                                                                        "type": "string"
                                                                    },
                                                                    "subTotal": {
                                                                        "type": "number"
                                                                    },
                                                                    "taxAmt": {
                                                                        "type": "number"
                                                                    },
                                                                    "freight": {
                                                                        "type": "number"
                                                                    },
                                                                    "totalDue": {
                                                                        "type": "number"
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "UpdateCustomer": {
                            "type": "object",
                            "properties": {
                                "customer": {
                                    "type": "object",
                                    "properties": {
                                        "salesTerritoryName": {
                                            "type": "string"
                                        },
                                        "person": {
                                            "type": "object",
                                            "properties": {
                                                "title": {
                                                    "type": "string"
                                                },
                                                "firstName": {
                                                    "type": "string"
                                                },
                                                "middleName": {
                                                    "type": "string"
                                                },
                                                "lastName": {
                                                    "type": "string"
                                                },
                                                "fullName": {
                                                    "type": "string"
                                                },
                                                "suffix": {
                                                    "type": "string"
                                                },
                                                "emailPromotion": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "store": {
                                            "type": "object",
                                            "properties": {
                                                "name": {
                                                    "type": "string"
                                                },
                                                "salesPerson": {
                                                    "type": "object",
                                                    "properties": {
                                                        "firstName": {
                                                            "type": "string"
                                                        },
                                                        "middleName": {
                                                            "type": "string"
                                                        },
                                                        "lastName": {
                                                            "type": "string"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "example": {
                                "customer": {
                                    "salesTerritoryName": "sample",
                                    "person": {
                                        "title": "sample",
                                        "firstName": "sample",
                                        "middleName": "sample",
                                        "lastName": "sample",
                                        "fullName": "sample",
                                        "suffix": "sample",
                                        "emailPromotion": "sample"
                                    },
                                    "store": {
                                        "name": "sample",
                                        "salesPerson": {
                                            "firstName": "sample",
                                            "middleName": "sample",
                                            "lastName": "sample"
                                        }
                                    }
                                }
                            }
                        },
                        "UpdateCustomerResponse": {
                            "type": "object",
                            "properties": {
                                "customer": {
                                    "type": "object",
                                    "properties": {
                                        "salesTerritoryName": {
                                            "type": "string"
                                        },
                                        "person": {
                                            "type": "object",
                                            "properties": {
                                                "title": {
                                                    "type": "string"
                                                },
                                                "firstName": {
                                                    "type": "string"
                                                },
                                                "middleName": {
                                                    "type": "string"
                                                },
                                                "lastName": {
                                                    "type": "string"
                                                },
                                                "fullName": {
                                                    "type": "string"
                                                },
                                                "suffix": {
                                                    "type": "string"
                                                },
                                                "emailPromotion": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "store": {
                                            "type": "object",
                                            "properties": {
                                                "name": {
                                                    "type": "string"
                                                },
                                                "salesPerson": {
                                                    "type": "object",
                                                    "properties": {
                                                        "firstName": {
                                                            "type": "string"
                                                        },
                                                        "middleName": {
                                                            "type": "string"
                                                        },
                                                        "lastName": {
                                                            "type": "string"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "AddCustomerAddress": {
                            "type": "object",
                            "properties": {
                                "customerAddress": {
                                    "type": "object",
                                    "properties": {
                                        "addressType": {
                                            "type": "string"
                                        },
                                        "address": {
                                            "type": "object",
                                            "properties": {
                                                "addressLine1": {
                                                    "type": "string"
                                                },
                                                "addressLine2": {
                                                    "type": "string"
                                                },
                                                "postalCode": {
                                                    "type": "string"
                                                },
                                                "city": {
                                                    "type": "string"
                                                },
                                                "stateProvinceCode": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "example": {
                                "customerAddress": {
                                    "addressType": "sample",
                                    "address": {
                                        "addressLine1": "sample",
                                        "addressLine2": "sample",
                                        "postalCode": "sample",
                                        "city": "sample",
                                        "stateProvinceCode": "sample"
                                    }
                                }
                            }
                        },
                        "AddCustomerAddressResponse": {
                            "type": "object",
                            "properties": {
                                "addCustomerAddressResponse": {
                                    "type": "object",
                                    "properties": {
                                        "addCustomerAddressResult": {
                                            "type": "object",
                                            "properties": {}
                                        }
                                    }
                                }
                            }
                        },
                        "UpdateCustomerAddress": {
                            "type": "object",
                            "properties": {
                                "address": {
                                    "type": "object",
                                    "properties": {
                                        "addressLine1": {
                                            "type": "string"
                                        },
                                        "addressLine2": {
                                            "type": "string"
                                        },
                                        "postalCode": {
                                            "type": "string"
                                        },
                                        "city": {
                                            "type": "string"
                                        },
                                        "stateProvinceCode": {
                                            "type": "string"
                                        }
                                    }
                                }
                            },
                            "example": {
                                "address": {
                                    "addressLine1": "sample",
                                    "addressLine2": "sample",
                                    "postalCode": "sample",
                                    "city": "sample",
                                    "stateProvinceCode": "sample"
                                }
                            }
                        },
                        "UpdateCustomerAddressResponse": {
                            "type": "object",
                            "properties": {
                                "updateCustomerAddressResponse": {
                                    "type": "object",
                                    "properties": {
                                        "updateCustomerAddressResult": {
                                            "type": "object",
                                            "properties": {}
                                        }
                                    }
                                }
                            }
                        },
                        "DeleteCustomerAddressResponse": {
                            "type": "object",
                            "properties": {
                                "deleteCustomerAddressResponse": {
                                    "type": "object",
                                    "properties": {
                                        "deleteCustomerAddressResult": {
                                            "type": "object",
                                            "properties": {}
                                        }
                                    }
                                }
                            }
                        },
                        "AddCustomerContact": {
                            "type": "object",
                            "properties": {
                                "customerContact": {
                                    "type": "object",
                                    "properties": {
                                        "contactType": {
                                            "type": "string"
                                        },
                                        "contact": {
                                            "type": "object",
                                            "properties": {
                                                "title": {
                                                    "type": "string"
                                                },
                                                "firstName": {
                                                    "type": "string"
                                                },
                                                "middleName": {
                                                    "type": "string"
                                                },
                                                "lastName": {
                                                    "type": "string"
                                                },
                                                "suffix": {
                                                    "type": "string"
                                                },
                                                "emailAddresses": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "emailAddress": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "example": {
                                "customerContact": {
                                    "contactType": "sample",
                                    "contact": {
                                        "title": "sample",
                                        "firstName": "sample",
                                        "middleName": "sample",
                                        "lastName": "sample",
                                        "suffix": "sample",
                                        "emailAddresses": [{
                                            "emailAddress": "sample"
                                        }]
                                    }
                                }
                            }
                        },
                        "AddCustomerContactResponse": {
                            "type": "object",
                            "properties": {
                                "addCustomerContactResponse": {
                                    "type": "object",
                                    "properties": {
                                        "addCustomerContactResult": {
                                            "type": "object",
                                            "properties": {}
                                        }
                                    }
                                }
                            }
                        },
                        "UpdateCustomerContact": {
                            "type": "object",
                            "properties": {
                                "customerContact": {
                                    "type": "object",
                                    "properties": {
                                        "contactType": {
                                            "type": "string"
                                        },
                                        "contact": {
                                            "type": "object",
                                            "properties": {
                                                "title": {
                                                    "type": "string"
                                                },
                                                "firstName": {
                                                    "type": "string"
                                                },
                                                "middleName": {
                                                    "type": "string"
                                                },
                                                "lastName": {
                                                    "type": "string"
                                                },
                                                "suffix": {
                                                    "type": "string"
                                                },
                                                "emailAddresses": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "emailAddress": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "example": {
                                "customerContact": {
                                    "contactType": "sample",
                                    "contact": {
                                        "title": "sample",
                                        "firstName": "sample",
                                        "middleName": "sample",
                                        "lastName": "sample",
                                        "suffix": "sample",
                                        "emailAddresses": [{
                                            "emailAddress": "sample"
                                        }]
                                    }
                                }
                            }
                        },
                        "UpdateCustomerContactResponse": {
                            "type": "object"
                        },
                        "DeleteCustomerContact": {
                            "type": "object",
                            "properties": {
                                "contactType": {
                                    "type": "string"
                                },
                                "contact": {
                                    "type": "object",
                                    "properties": {
                                        "firstName": {
                                            "type": "string"
                                        },
                                        "middleName": {
                                            "type": "string"
                                        },
                                        "lastName": {
                                            "type": "string"
                                        }
                                    }
                                }
                            },
                            "example": {
                                "contactType": "sample",
                                "contact": {
                                    "firstName": "sample",
                                    "middleName": "sample",
                                    "lastName": "sample"
                                }
                            }
                        },
                        "DeleteCustomerContactResponse": {
                            "type": "object",
                            "properties": {
                                "deleteCustomerContactResponse": {
                                    "type": "object",
                                    "properties": {
                                        "deleteCustomerContactResult": {
                                            "type": "object",
                                            "properties": {}
                                        }
                                    }
                                }
                            }
                        },
                        "AddCustomerContactInfo": {
                            "type": "object",
                            "properties": {
                                "customerContactInfo": {
                                    "type": "object",
                                    "properties": {
                                        "channel": {
                                            "type": "string"
                                        },
                                        "contactInfoType": {
                                            "type": "string"
                                        },
                                        "value": {
                                            "type": "string"
                                        }
                                    }
                                }
                            },
                            "example": {
                                "customerContactInfo": {
                                    "channel": "sample",
                                    "contactInfoType": "sample",
                                    "value": "sample"
                                }
                            }
                        },
                        "AddCustomerContactInfoResponse": {
                            "type": "object",
                            "properties": {
                                "addCustomerContactInfoResponse": {
                                    "type": "object",
                                    "properties": {
                                        "addCustomerContactInfoResult": {
                                            "type": "object",
                                            "properties": {}
                                        }
                                    }
                                }
                            }
                        },
                        "DeleteCustomerContactInfo": {
                            "type": "object",
                            "properties": {
                                "customerContactInfo": {
                                    "type": "object",
                                    "properties": {
                                        "channel": {
                                            "type": "string"
                                        },
                                        "contactInfoType": {
                                            "type": "string"
                                        },
                                        "value": {
                                            "type": "string"
                                        }
                                    }
                                }
                            },
                            "example": {
                                "customerContactInfo": {
                                    "channel": "sample",
                                    "contactInfoType": "sample",
                                    "value": "sample"
                                }
                            }
                        },
                        "DeleteCustomerContactInfoResponse": {
                            "type": "object",
                            "properties": {
                                "deleteCustomerContactInfoResponse": {
                                    "type": "object",
                                    "properties": {
                                        "deleteCustomerContactInfoResult": {
                                            "type": "object",
                                            "properties": {}
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    ],
    "outputs": {}
}